<!DOCTYPE html><html class="theme-next gemini use-motion" lang="zh-Hans"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-center-atom.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="域名,个人博客,"><link rel="alternate" href="/atom.xml" title="Yao's Blog" type="application/atom+xml"><meta name="description" content="本文是记录如何搭建个人博客系列的第一篇。该系列有3篇：1.付费虚拟云主机+WordPress；2.免费github+Hexo；3.个人站点yaojx.net的优化之路。"><meta name="keywords" content="域名,个人博客"><meta property="og:type" content="article"><meta property="og:title" content="搭建个人博客心得---godaddy+WordPress"><meta property="og:url" content="https://YaojiaxinPC.github.io/6CreatWordPress/index.html"><meta property="og:site_name" content="Yao&#39;s Blog"><meta property="og:description" content="本文是记录如何搭建个人博客系列的第一篇。该系列有3篇：1.付费虚拟云主机+WordPress；2.免费github+Hexo；3.个人站点yaojx.net的优化之路。"><meta property="og:locale" content="zh-Hans"><meta property="og:image" content="https://yaojiaxinpc.github.io/contentimg/6/1.png"><meta property="og:image" content="https://yaojiaxinpc.github.io/contentimg/6/2.png"><meta property="og:image" content="https://yaojiaxinpc.github.io/contentimg/6/3.png"><meta property="og:image" content="https://yaojiaxinpc.github.io/contentimg/6/4.png"><meta property="og:image" content="https://yaojiaxinpc.github.io/contentimg/6/5.png"><meta property="og:image" content="https://yaojiaxinpc.github.io/contentimg/6/6.png"><meta property="og:image" content="https://yaojiaxinpc.github.io/contentimg/6/7.png"><meta property="og:image" content="https://yaojiaxinpc.github.io/contentimg/6/8.png"><meta property="og:updated_time" content="2018-10-18T01:59:01.921Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="搭建个人博客心得---godaddy+WordPress"><meta name="twitter:description" content="本文是记录如何搭建个人博客系列的第一篇。该系列有3篇：1.付费虚拟云主机+WordPress；2.免费github+Hexo；3.个人站点yaojx.net的优化之路。"><meta name="twitter:image" content="https://yaojiaxinpc.github.io/contentimg/6/1.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Gemini",version:"5.1.4",sidebar:{position:"left",display:"post",offset:12,b2t:!0,scrollpercent:!0,onmobile:!1},fancybox:!0,tabs:!0,motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"博主"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://YaojiaxinPC.github.io/6CreatWordPress/"><title>搭建个人博客心得---godaddy+WordPress | Yao's Blog</title><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?59fb881ccdff1a2b18e2b7839f452118";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script></head><body itemscope="" itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-left page-post-detail"><div class="headband"></div> <a href="https://github.com/YaojiaxinPC" class="github-corner" aria-label="View source on GitHub" rel="external nofollow noopener noreferrer" target="_blank"><svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"/><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"/><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"/></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Yao's Blog</span><span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Welcome to yao's blog.</p></div><div class="site-nav-toggle"> <button><span class="btn-bar"></span><span class="btn-bar"></span><span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br> 首页</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br> 归档</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-question-circle"></i><br> 分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br> 标签</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br> 关于</a></li><li class="menu-item menu-item-commonweal"><a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br> 公益404</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br> 搜索</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i></span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"> <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://YaojiaxinPC.github.io/6CreatWordPress/"><span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="name" content="姚佳鑫"><meta itemprop="description" content=""><meta itemprop="image" content="/contentimg/headpic.jpg"></span><span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization"><meta itemprop="name" content="Yao's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">搭建个人博客心得---godaddy+WordPress</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-10-16T22:55:58+08:00">2018-10-16</time></span> <span class="post-category"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope="" itemtype="http://schema.org/Thing"><a href="/categories/编程人生/" itemprop="url" rel="index"><span itemprop="name">编程人生</span></a></span></span> <span id="/6CreatWordPress/" class="leancloud_visitors" data-flag-title="搭建个人博客心得---godaddy+WordPress"><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数&#58;</span><span class="leancloud-visitors-count"></span></span><div class="post-wordcount"><span class="post-meta-item-icon"><i class="fa fa-file-word-o"></i></span> <span class="post-meta-item-text">字数统计&#58;</span> <span title="字数统计">2.6k 字</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-clock-o"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span title="阅读时长">8 分钟</span></div></div></header><div class="post-body" itemprop="articleBody"><p>　　本文是记录如何搭建个人博客系列的第一篇。该系列有3篇：1.付费虚拟云主机+WordPress；2.免费github+Hexo；3.个人站点yaojx.net的优化之路。</p><a id="more"></a><p>　　搭建个人博客的第一篇，理应分析一下为什么要弄这件事。</p><p>　　作为一个CS开发人员，现在转型手游/端游开发，和网站开发还是没挂钩，怎么会想到做一个网站？其实，不应该是前端开发人员才做网站，谁都可以做，只是使用的工具不同而已：从事网站开发的，一般都是自己搭整套系统来显示自己的实力；非网页开发的程序员，靠搜索+工具，也是能搭出来一个网站的；再特殊点，非技术人员，花点钱，想弄怎样的网站就能弄怎样的网站。这样实现过程并不是重点，重点是为什么要做网站？</p><p>　　写代码有好几年了，但是，现在回头发现什么都没留下。为什么会这样？因为平时，虽然经常逛技术论坛和技术博客，但是也是看过后，觉得好的，就收藏网址，几年下来还真保存了几兆的网站链接，下载了不少工程。但是收藏得越多，去回顾的动力就越弱，如果加上这个技术点使用得少，时间一久就会模糊的，导致后面遇到，头脑有个印象，但是就是想不起来。特别是在一次硬盘出问题后就没后文了。</p><p>　　后面接触了GitHub，明白了一个道理：技术无国界，技术需要让人知道。技术应该是分享出来让更多人了解的，大家一起探讨，才能优化改善。GitHub的开源，实际上是他们分享给我们，他们是怎么做到这样的。如果有人能看得懂，并且加入优化改善，一方面对开源方是利好，另一方面，对贡献方，是磨练，也是一种承认，承认你的技术，你对该系统的贡献。久而久之，大家都会一起进步，同时带动更大的群体，发展到现在科技圈的繁荣，越来越多高新技术人才出现。</p><p>　　而如果我还是像之前那样，学到一点东西就悄悄保存在自己的硬盘上，有什么用？这就和你到github上下载东西，用到自己的工程中，却把水印去掉，甚至偷偷改了变量名一样。这并不是你学到东西的体现，只是你会运用的表现。这样并不能进步，永远只能偷偷跟在别人后面。</p><p>　　真正学到东西，是你摸清楚整个流程，然后能用自己的话讲出来。所以这个时候弄一个分享记录平台就有好处了。你学了这个东西，分析记录到平台上，别人看到后，会进行点评，指正里面的错误，或者和你一起讨论。这样才是真正的技术精髓。</p><p>　　所以我就建了这个个人博客了。</p><p>　　整个流程蛮折腾的，也花了点钱，不过好在体验过，学到了东西，也值了。</p><p>　　这里建个人博客，有不花钱的：博客园、CSDN等等，甚至微博、FaceBook都可以。如果想逼格高点，就得注册个人域名了。</p><p>　　我这里用了<a href="https://sg.godaddy.com/zh" rel="external nofollow noopener noreferrer" target="_blank">GoDaddy</a> 注册域名，现在GoDaddy和中国合作了，网站也有中文版，但是由于是国外的，国内访问速度一般般，好处就是不用备案。在阿里腾讯那些注册，得备案，然后要花300+大洋去买主机，不然不给办。不过如果有学生优惠，还是可以在国内弄的。</p><p>　　这里贴一下我当时参考的<a href="http://cio.idcquan.com/22161.shtml" rel="external nofollow noopener noreferrer" target="_blank">链接</a> 吧。注意“免费的东西才是最贵的”这个道理。</p><p>　　当时我遇到活动价，基础Linux虚拟主机，1＄/m，然后买一年送一个域名，相当于12x7=84￥=一年期限的“域名”+“博客主机”。当然这里的“博客主机”，可定制性不是很高，没有给Linux的root权限，所以不能自己搭整个网页程序放上去，只能用自带现成的程序。而这个现成程序，就是WordPress。可定制性不高，虽然可以自己改文件，然后更新到主机，但是由于网速问题，我还是放弃了这个念头。</p><p>下面记录一下怎么弄：</p><p><img src="/contentimg/6/1.png" alt="Result pic 1" title="基础虚拟主机情况"></p><p>　　买了虚拟主机送域名后，登陆帐号，进到“主机管理”页面。目前，这个管理网页，我们用到的操作就是登陆cPanel，还有设置DNS转址（不过响应很慢，改了后等很久才响应过来，建议使用其他的服务商来处理。第三篇博文将介绍这个DNS转址处理）。其他的都不用用到（包括SSH登陆，买包月wordpress套餐等等）。点击“cPanel管理员”登陆。</p><p><img src="/contentimg/6/2.png" alt="Result pic 2" title="登陆虚拟主机"></p><p>　　跳转到“应用程序”–&gt;“My Applications”，可以看到这里已经有一个wordpress，不用理会，直接删除掉。删除要选上面那一排，下面一排的设计不合理，是批量的情况下使用的。</p><p>　　删除完，回到“Applications Browser”，里面有很多现成的程序，不过都是国外的，有时间可以自己试试。找到WordPress，安装。这样才能进行自由定制。安装完后要登陆配置wordpress，流程很简单的，只不过网络问题，得等而已。这里就不记录。</p><p>　　这样，虽然看起来是安装程序，但是仔细看一下，我们看得到文件夹的，是可以上传下载的，数据库也是。管理文件有ftp方式，数据库有一个php页面，都是智能化的，不用自己在linux界面打命令（cPanel的作用–可视化操作）。这样，只要我们能忍受0.3kb/s和经常性断流，是可以把整个博客压缩下载下来，同时把数据库爬一份下来，布到本地，就能随便自己改css、js文件等等那些了，改完再传回去。</p><p>　　怎么玩这个wordpress的，我就不详细说了，网上教程好多，这里贴个链接<a href="https://www.cnblogs.com/4770k/p/5199523.html" rel="external nofollow noopener noreferrer" target="_blank">从零起步搭建Wordpress个人博客——Windows 平台篇（上）</a></p><p>按教程，这里会遇到问题：</p><p>　　网页打不开，报“iis运行php网站提示FastCgiModule错误模块”：打开控制面板，打开“启动或关系Windows功能”，选择iis下的“应用程序开发功能”，开启“CGI”即可。</p><p><img src="/contentimg/6/3.png" alt="Result pic 3" title="开启CGI"></p><p>　　可以自己加几个挂件上去，写写js脚本，还是蛮好玩的。注意写脚本要区分desktop还是phone，我没接触过前端，所以只是简单的使用了窗口大小来判断，不同情况下，某些插件应该区别对待的。例如我引用了<a href="https://github.com/hustcc/canvas-nest.js" rel="external nofollow noopener noreferrer" target="_blank">蜘蛛网浮动</a> 的特效。里面设置的是对应电脑端：99个浮动点。如果放到手机端，会密集恐惧症，所以这里就得改小了。这里360浏览器，反应wordpress的大小还是比较有趣的，双击时是变成移动端的宽度大小，所以可以粗略用这个来看效果。当然，还是谷歌浏览器写js脚本比较好。其他还有一个时钟挂件，代码是网上找到。js代码很好找，有现成的，实在不行，F12定位，也能看出来是那些代码，然后复制粘贴+修改，凑齐css+js+html就能跑出来效果了。这样抄了几个小特效，发现前端蛮好玩的，就是代码写起来没vs的美观，一直在想怎么会有人写代码不换行的？还有可视化编程，不能改的时候就能看到效果，只能改后，到浏览器刷新才能看到，这样调位置时超级烦（不过后面发现可以在浏览器中的缓存中改，就能实时看到效果，改好后复制回来就行）。总体上，还是推荐多多接触js的，短短的代码量就能实现很强大的功能。</p><p>　　这里也提一下一些心得吧，在挂饰中，是可以添加js代码的，我的两个特效就是这样加进去的，就不用拉文件下来改，然后发回去的。然后就是发布后，是显示成全文的，所以在编写文章时，开头写大概内容后，添加“more标签”，这样显示出来的才是“大概内容”+“继续阅读”。</p><p><img src="/contentimg/6/4.png" alt="Result pic 4" title="添加“继续阅读”标签"></p><p>　　说实话，这个买买买，然后建站的过程不耗时，真正耗时是DNS问题。</p><p>　　第一天搭好后，第二天访问，发现404，登cPanel那边跳过去也不行。当时想不明白，只能删了重装。单独删wordpress是不行的，还是不能访问，所以问题不在wordpress上。后面重置cPanel就可以了，同时发现，主机IP变了。说明是服务器问题，后面找了相关的文章，了解到是用的人多，服务器承载不过来，就经常出现这个情况。当时改谷歌的dns、换手机热点、联通移动等等都试过没用。证明问题真不是出在我这边，真的是服务端那边的。ping域名ip，会发现基本不通。</p><p>　　确实，一开始ping自己的域名，400+的延迟，然后挂DNSpod（现在和腾讯合作），没用，因为ip是国外的，所以需要用CDN加速。</p><p>　　后面还是用的国外免费的：<a href="https://www.cloudflare.com/" rel="external nofollow noopener noreferrer" target="_blank">cloudflare</a></p><p>　　登陆注册，设置好域名后，隔几个小时候再来ping，延迟只有200+了。</p><p><img src="/contentimg/6/5.png" alt="Result pic 5" title="设置GoDaddy的域名服务器"></p><p><img src="/contentimg/6/6.png" alt="Result pic 6" title="选免费套餐"></p><p><img src="/contentimg/6/7.png" alt="Result pic 7" title="复制过去GoDaddy的两个链接"></p><p>　　当然，最好也做一下wordpress的优化，就是把插件全部删除，装两个加速的插件上去（有专门对应cloudflare的插件）。这样，虽然不能让第一次打开能快到什么地步，但是第二次打开却是能很快的（使用缓存加速功能）。</p><p>　　这里能挂载，当然也能解除了：</p><p><img src="/contentimg/6/8.png" alt="Result pic 8" title="解除挂载"></p><p>　　这个虚拟主机+WordPress，性价比不高，访问很慢，还经常性断网。后面我还是转战GitPage。</p></div><div style="height:85px;line-height:85px;text-align:center;color:#ccc"><hr size="7" color="coral" style="vertical-align:middle;float:left" width="40%"> The End<hr size="7" color="coral" style="vertical-align:middle;float:right" width="40%"><br style="clear:both"></div><div><div id="wechat_subscriber" style="display:block;padding:10px 0;margin:20px auto;width:100%;text-align:center"> <img id="wechat_subscriber_qcode" src="/images/wechataddfriend.png" alt="姚佳鑫 wechat" style="width:200px;max-width:100%"><div>如果您对我的文章感兴趣，可以添加我的微信</div></div></div><div><div style="padding:10px 0;margin:20px auto;width:90%;text-align:center"><div>感谢您的支持</div> <button id="rewardButton" disable="enable" onclick='var qr=document.getElementById("QR");"none"===qr.style.display?qr.style.display="block":qr.style.display="none"'> <span>打赏</span></button><div id="QR" style="display:none"><div id="wechat" style="display:inline-block"> <img id="wechat_qr" src="/images/wechatpay.png" alt="姚佳鑫 微信支付"><p>微信支付</p></div><div id="alipay" style="display:inline-block"> <img id="alipay_qr" src="/images/alipay.png" alt="姚佳鑫 支付宝"><p>支付宝</p></div></div></div></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> 姚佳鑫</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://YaojiaxinPC.github.io/6CreatWordPress/" title="搭建个人博客心得---godaddy+WordPress">https://YaojiaxinPC.github.io/6CreatWordPress/</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/" rel="external nofollow noopener noreferrer" target="_blank">CC BY-NC-SA 3.0</a> 许可协议。转载请注明出处！</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/域名/" rel="tag"><i class="fa fa-tag"></i> 域名</a><a href="/tags/个人博客/" rel="tag"><i class="fa fa-tag"></i> 个人博客</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/5Closure/" rel="next" title="闭包Closure"><i class="fa fa-chevron-left"></i> 闭包Closure</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"> <a href="/7CreatGitPage/" rel="prev" title="搭建个人博客心得---github+Hexo">搭建个人博客心得---github+Hexo<i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"></div></div></div><div class="comments" id="comments"></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span><span class="sidebar-toggle-line sidebar-toggle-line-middle"></span><span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><section class="site-overview-wrap sidebar-panel sidebar-panel-active"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" src="/contentimg/headpic.jpg" alt="姚佳鑫"><p class="site-author-name" itemprop="name">姚佳鑫</p><p class="site-description motion-element" itemprop="description">Record My Coding life.</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">35</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/index.html"><span class="site-state-item-count">20</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/index.html"><span class="site-state-item-count">55</span> <span class="site-state-item-name">标签</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/YaojiaxinPC" target="_blank" title="GitHub" rel="external nofollow noopener noreferrer"><i class="fa fa-fw fa-github"></i> GitHub</a></span><span class="links-of-author-item"><a href="http://wpa.qq.com/msgrd?v=3&uin=659771655&site=qq&menu=yes" target="_blank" title="QQ" rel="external nofollow noopener noreferrer"><i class="fa fa-fw fa-qq"></i> QQ</a></span></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span><span class="with-love"><i class="fa fa-user"></i></span> <span class="author" itemprop="copyrightHolder">姚佳鑫</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-area-chart"></i></span> <span class="post-meta-item-text">Site words total count&#58;</span> <span title="Site words total count">52.9k</span></div><div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io" rel="external nofollow noopener noreferrer">Hexo</a> 强力驱动</div> <span class="post-meta-divider">|</span><div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next" rel="external nofollow noopener noreferrer">NexT.Gemini</a> v5.1.4</div></div></footer></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("MKSSliaXY1yJfNdREDKmugjN-gzGzoHsz","JXNiobIr2wdnlcGKbKeKAUlP")</script><script>function showTime(e){var t=new AV.Query(e),c=[],u=$(".leancloud_visitors");u.each(function(){c.push($(this).attr("id").trim())}),t.containedIn("url",c),t.find().done(function(e){var t=".leancloud-visitors-count";if(0!==e.length){for(var n=0;n<e.length;n++){var o=e[n],i=o.get("url"),s=o.get("time"),r=document.getElementById(i);$(r).find(t).text(s)}for(n=0;n<c.length;n++){i=c[n],r=document.getElementById(i);var l=$(r).find(t);""==l.text()&&l.text(0)}}else u.find(t).text(0)}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(i){var e=$(".leancloud_visitors"),s=e.attr("id").trim(),r=e.attr("data-flag-title").trim(),t=new AV.Query(i);t.equalTo("url",s),t.find({success:function(e){if(0<e.length){var t=e[0];t.fetchWhenSave(!0),t.increment("time"),t.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var n=new i,o=new AV.ACL;o.setPublicReadAccess(!0),o.setPublicWriteAccess(!0),n.setACL(o),n.set("title",r),n.set("url",s),n.set("time",1),n.save(null,{success:function(e){$(document.getElementById(s)).find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):1<$(".post-title-link").length&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),e=window.location.protocol.split(":")[0];t.src="https"===e?"https://zz.bdstatic.com/linksubmit/push.js":"http://push.zhanzhang.baidu.com/push.js";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}()</script></body></html>