<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Yao&#39;s Blog</title>
  
  <subtitle>Welcome to yao&#39;s blog.</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://YaojiaxinPC.github.io/"/>
  <updated>2018-10-23T16:27:14.685Z</updated>
  <id>https://YaojiaxinPC.github.io/</id>
  
  <author>
    <name>姚佳鑫</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Unity优化_WebGL发布优化</title>
    <link href="https://YaojiaxinPC.github.io/26UnitySuper_1/"/>
    <id>https://YaojiaxinPC.github.io/26UnitySuper_1/</id>
    <published>2018-10-23T06:59:59.000Z</published>
    <updated>2018-10-23T16:27:14.685Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文是记录Unity的优化第一篇：WebGL发布优化。</p><p>　　后续将记录其他平台的优化，以及编程中遇到的优化。</p><a id="more"></a><p>　　开头分享几个博客链接：</p><p>来自印度的：<a href="http://www.theappguruz.com/blog/unity-optimization-initiative" rel="external nofollow noopener noreferrer" target="_blank">App Guruz</a> </p><p>Unity社区的两篇文章：</p><p><a href="https://blogs.unity3d.com/cn/2016/09/20/understanding-memory-in-unity-webgl/" rel="external nofollow noopener noreferrer" target="_blank">了解Unity WebGL中的内存</a> </p><p><a href="https://blogs.unity3d.com/cn/2016/12/05/unity-webgl-memory-the-unity-heap/" rel="external nofollow noopener noreferrer" target="_blank">Unity WebGL内存：Unity Heap</a> </p><p>　　本文就不重复博文中的细节了。</p><p>　　Unity发布WebGL版本，限制是很大的，必须事先定义所需内存，一旦决定，就不能减少或者增加！而且包不能太大，下载速度严重影响启动时间。特别是还有部分API限制。总体上，限制因素很多。当然，如果用2018新特性的，就能动态内存及高压缩。不过，目前还是先从普通版本做起。</p><p>　　小游戏是可以发布成WebGL版本的，但是大游戏难度系数很高，特别是画面越精美的。因为要考虑web可以运行在任何低配置的场景，特别是跑在手机32位浏览器。</p><p>　　针对Unity发布WebGL，细节有好多，目前我就按照遇到的问题，从初级开始，一个一个分享记录吧。</p><p>　　本博客会不定时分享部分官方商店里面的小游戏，同时发布成WebGL版本让大家可以体验。</p><p>　　先记录简单发布2D拾荒者遇到的问题吧。</p><h2 id="疑难解答"><a href="#疑难解答" class="headerlink" title="疑难解答"></a>疑难解答</h2><h3 id="360打不开"><a href="#360打不开" class="headerlink" title="360打不开"></a>360打不开</h3><p>　　该问题在前面的博客有提到，是新版本的Unity编译的包，部分浏览器暂时不支持WebGL2.0的特性，所以识别不了，就不能打开了。</p><p>　　只要用老版本的Unity编译发布，就可以使用了。目前我用的是5.4.6f3。发布出来是Release包；再往上的版本发布的是Build包，就得用Chrome和手机浏览器打开了。</p><h3 id="抛异常–内存不足"><a href="#抛异常–内存不足" class="headerlink" title="抛异常–内存不足"></a>抛异常–内存不足</h3><p>　　这个需要细谈。是本篇的重点。</p><p>　　Unity发布的这个webgl，运行在浏览器上，是需要事先定义内存的，后面不能减小或者增大。所以得了解你这个程序最少需要多少内存，然后根据2的幂来取值。</p><p><img src="/contentimg/26/1.png" alt="Result pic 1" title="定义内存大小的地方"></p><p>　　那怎么看程序需要多少内存？</p><h4 id="Profiler"><a href="#Profiler" class="headerlink" title="Profiler"></a>Profiler</h4><p><img src="/contentimg/26/2.png" alt="Result pic 1" title="Profiler"></p><p>　　在memory部分，可以查看当前场景使用了多少内存。一般看Texture和Audio就行，这两个是最大的，加起来的值就是至少需要的内存，往上取2的幂就能大概出一个值了。像图中，大致23m，所以往上取32m就行。</p><h4 id="gzip解压方式"><a href="#gzip解压方式" class="headerlink" title="gzip解压方式"></a>gzip解压方式</h4><p>　　这里还有个办法，就是先编译一次包。然后把Release里的3个包全换成后缀gzip，解压出来，凑起来的大小就是到时在浏览器里的大小。</p><p><img src="/contentimg/26/3.png" alt="Result pic 1" title="gzip解压后大小 27.6m"></p><h2 id="优化（重点）"><a href="#优化（重点）" class="headerlink" title="优化（重点）"></a>优化（重点）</h2><h3 id="删除多余文件"><a href="#删除多余文件" class="headerlink" title="删除多余文件"></a>删除多余文件</h3><p>　　第一个，首要的，删除多余文件。</p><p>　　可以通过%homepath%\AppData\Local\Unity\Editor\Editor.log，或者是在Console窗口最右边打开。</p><p><img src="/contentimg/26/4.png" alt="Result pic 1" title="Console窗口最右边"></p><p><img src="/contentimg/26/5.png" alt="Result pic 1" title="Editor.log"></p><p>　　查看该日志，可以看到里面记录了整个编译过程，包里有什么文件，大小等等信息。</p><h3 id="图片压缩"><a href="#图片压缩" class="headerlink" title="图片压缩"></a>图片压缩</h3><p>　　图片压缩在5.x版本的优化选项较少，在2018的就多了，可以选择压缩类型、压缩质量等等参数。</p><p>　　5.x的<a href="http://blog.sina.com.cn/s/blog_5b6cb9500102vi6i.html" rel="external nofollow noopener noreferrer" target="_blank">取消Generate Mip Maps</a>  ， 因为只是普通的2D图片，不需要3D效果。</p><p><img src="/contentimg/26/6.png" alt="Result pic 1" title="取消Generate Mip Maps"></p><p>然后就是根据自己喜好来调压缩比例了。压缩质量越低，看起来越模糊。</p><p><img src="/contentimg/26/7.png" alt="Result pic 1" title="最高压缩"></p><p><img src="/contentimg/26/8.png" alt="Result pic 1" title="保持原质量"></p><h3 id="audio压缩"><a href="#audio压缩" class="headerlink" title="audio压缩"></a>audio压缩</h3><p>　　其实也不算压缩，只是修改了音频文件的读取方式而已。</p><p>　　首先要找出大文件，一般是背景音乐：</p><p><img src="/contentimg/26/9.png" alt="Result pic 1" title="找出大文件"></p><p>　　这里可以修改的只有一个Load Type选项，一般情况下忽略第一个。第二第三差不多，一般都是建议大文件选第二个（Compressed in memory）；零碎的小文件选第三个（streaming）。区别就是加载时会不会存在延迟，这个在大文件上才会体现出来。</p><p><img src="/contentimg/26/10.png" alt="Result pic 1" title="audio优化"></p><p>　　记住这里选第一个的话，这12个文件，会导致运行时的audio内存高达13m。选stream的话才250kb。差别很大的。</p><h3 id="其他优化"><a href="#其他优化" class="headerlink" title="其他优化"></a>其他优化</h3><p>　　在这个2D小游戏中，剩下其他的优化效果很小，就设置static选项（让系统自动优化）、取消天空盒等等细节。所以暂时不提，等后面3D部分的再说这个优化。</p><h3 id="编译优化"><a href="#编译优化" class="headerlink" title="编译优化"></a>编译优化</h3><p>　　由于这个2D小游戏很简单，没涉及其他的，所以可以直接上编译选项优化了。</p><p>　　直接到Player Settings设置：</p><p><img src="/contentimg/26/11.png" alt="Result pic 1" title="Publishing Settings"></p><p>　　Enable Exceptions设为None，启用Data caching。根据前面观察的内存大小，设置一个值（该值后面能在文本文件直接修改，故此处影响小，随便填）。</p><p><img src="/contentimg/26/12.png" alt="Result pic 1" title="Other Settings"></p><p>　　这里只有两个是必须的：</p><ol><li><p>启用“Strip Engine Code”，该项表示剔除不用的dll。</p></li><li><p>不打印log。</p></li></ol><p>　　其他的看喜好选吧。不是必要设置。然后就可以编译出包了！</p><p><img src="/contentimg/26/13.png" alt="Result pic 1" title="记录申请内存大小的属性"></p><h2 id="html优化"><a href="#html优化" class="headerlink" title="html优化"></a>html优化</h2><p>　　现在可以运行看到效果了，初始是不提供file模式看效果的，这里有篇文件介绍怎么设置Chrome支持file模式运行：</p><p><a href="http://www.cnblogs.com/huwenya/p/9547224.html" rel="external nofollow noopener noreferrer" target="_blank">Unity发布WebGl注意事项</a> </p><p>　　细节我就不再提了。下面要说的是怎么让内容居中显示：</p><p>　　初始启动，是在左上角的。体验不是很好。但是可以用F12看到，是绘制在canvas上的内容，是可以通过修改html代码来实现居中显示的。</p><p>　　html居中显示的方式是：</p><ol><li>增加div。</li><li>设置style=”position: absolute;left:50%;top:50%;margin-left:0px;margin-top:0px;”</li></ol><p>　　注意这里有个margin偏移值，因为目前的居中设置，是以该内容的左上角来居中的，所以出来效果是在第四象限的位置。就得让它根据自己的大小来偏1/2过去，就居中了。</p><p>　　由于html代码不支持动态计算，所以只能写css脚本了：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"contdivc"</span> <span class="attr">style</span>=<span class="string">"position: absolute;left:50%;top:50%;margin-left:0px;margin-top:0px;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/javascript'</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    window.onload=function() &#123;</span></span><br><span class="line"><span class="undefined">            document.getElementById( "contdivc" ).style.marginLeft = "-"+960/2 + "px";</span></span><br><span class="line"><span class="undefined">document.getElementById( "contdivc" ).style.marginTop = "-"+600/2 + "px";</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">"emscripten"</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">oncontextmenu</span>=<span class="string">"event.preventDefault()"</span> <span class="attr">height</span>=<span class="string">"600px"</span> <span class="attr">width</span>=<span class="string">"960px"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>　　现在刷新运行，居中了！</p><p>　　但是不能每次编译都来这里修改html的呀。怎么处理？</p><p>　　回到开头，Unity日志里面其实有提到，是用插件来编译的，这样，是肯定存在一个模版文件的！</p><p>　　该模版就在安装目录下：5.4.6f3\Editor\Data\PlaybackEngines\WebGLSupport\BuildTools\WebGLTemplates</p><p><img src="/contentimg/26/14.png" alt="Result pic 1" title="母板html"></p><p>　　那就好办了，直接改该文件就行了：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"contdivc"</span> <span class="attr">style</span>=<span class="string">"position: absolute;left:50%;top:50%;margin-left:0px;margin-top:0px;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">'text/javascript'</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    window.onload=function() &#123;</span></span><br><span class="line"><span class="undefined">            document.getElementById( "contdivc" ).style.marginLeft = "-"+%UNITY_WIDTH%/2 + "px";</span></span><br><span class="line"><span class="undefined">document.getElementById( "contdivc" ).style.marginTop = "-"+%UNITY_HEIGHT%/2 + "px";</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">"emscripten"</span> <span class="attr">id</span>=<span class="string">"canvas"</span> <span class="attr">oncontextmenu</span>=<span class="string">"event.preventDefault()"</span> <span class="attr">height</span>=<span class="string">"%UNITY_HEIGHT%px"</span> <span class="attr">width</span>=<span class="string">"%UNITY_WIDTH%px"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>文末贴几个我觉得还不错的文章：</p><p><a href="http://www.cnblogs.com/huwenya/p/9547224.html" rel="external nofollow noopener noreferrer" target="_blank">Unity发布WebGl注意事项</a></p><p><a href="https://www.cnblogs.com/Jason-c/p/8137193.html" rel="external nofollow noopener noreferrer" target="_blank">Unity 性能优化（力荐）</a></p><p><a href="https://blog.csdn.net/ElyXiao/article/details/51980863" rel="external nofollow noopener noreferrer" target="_blank">unity几种优化建议</a></p><p><a href="https://blog.csdn.net/mayzhengxi/article/details/76616864" rel="external nofollow noopener noreferrer" target="_blank">Unity5.3.3 webgl 注意</a></p><p><a href="https://blog.csdn.net/lyh916/article/details/44115095" rel="external nofollow noopener noreferrer" target="_blank">[Unity优化]减少内存占用：贴图优化</a></p><p><a href="https://blog.csdn.net/yuyingwin/article/details/78851312" rel="external nofollow noopener noreferrer" target="_blank">Unity3d Mesh、Texture、UI 压缩降低内存</a></p><p><a href="https://blog.csdn.net/qq_33747722/article/details/70544822" rel="external nofollow noopener noreferrer" target="_blank">Unity游戏开发性能优化（Sprite优化）</a></p><p><a href="https://blog.csdn.net/a673544319/article/details/82142283" rel="external nofollow noopener noreferrer" target="_blank">Unity游戏开发图片纹理压缩方案</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文是记录Unity的优化第一篇：WebGL发布优化。&lt;/p&gt;
&lt;p&gt;　　后续将记录其他平台的优化，以及编程中遇到的优化。&lt;/p&gt;
    
    </summary>
    
      <category term="Unity优化" scheme="https://YaojiaxinPC.github.io/categories/Unity%E4%BC%98%E5%8C%96/"/>
    
    
      <category term="发布优化" scheme="https://YaojiaxinPC.github.io/tags/%E5%8F%91%E5%B8%83%E4%BC%98%E5%8C%96/"/>
    
  </entry>
  
  <entry>
    <title>Unity平台预编译指令</title>
    <link href="https://YaojiaxinPC.github.io/25UnityPlatform_define/"/>
    <id>https://YaojiaxinPC.github.io/25UnityPlatform_define/</id>
    <published>2018-10-23T05:07:59.000Z</published>
    <updated>2018-10-23T05:30:01.855Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文记录Unity的平台预编译指令。</p><a id="more"></a><p><a href="https://docs.unity3d.com/Manual/PlatformDependentCompilation.html" rel="external nofollow noopener noreferrer" target="_blank">官方文档</a> </p><p>　　在脚本中，经常看到define指令，具体到底有多少指令？下面简单转载一下官方文档。</p><style>table th:first-of-type {    width: 200px;}</style><table><thead><tr><th style="text-align:right">定义</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:right">UNITY_EDITOR</td><td style="text-align:left">#define指令，用于从游戏代码中调用Unity Editor脚本。</td></tr><tr><td style="text-align:right">UNITY_EDITOR_WIN</td><td style="text-align:left">Windows上编辑器代码的#define指令。</td></tr><tr><td style="text-align:right">UNITY_EDITOR_OSX</td><td style="text-align:left">Mac OS X上编辑器代码的#define指令。</td></tr><tr><td style="text-align:right">UNITY_STANDALONE_OSX</td><td style="text-align:left">#define指令，用于编译/执行专门用于Mac OS X的代码（包括Universal，PPC和Intel架构）。</td></tr><tr><td style="text-align:right">UNITY_STANDALONE_WIN</td><td style="text-align:left">#define指令，用于专门为Windows独立应用程序编译/执行代码。</td></tr><tr><td style="text-align:right">UNITY_STANDALONE_LINUX</td><td style="text-align:left">#define指令，用于专门为Linux独立应用程序编译/执行代码。</td></tr><tr><td style="text-align:right">UNITY_STANDALONE</td><td style="text-align:left">#define指令，用于编译/执行任何独立平台（Mac OS X，Windows或Linux）的代码。</td></tr><tr><td style="text-align:right">UNITY_WII</td><td style="text-align:left">#define指令，用于编译/执行Wii控制台的代码。</td></tr><tr><td style="text-align:right">UNITY_IOS</td><td style="text-align:left">#define指令，用于编译/执行iOS平台的代码。</td></tr><tr><td style="text-align:right">UNITY_IPHONE</td><td style="text-align:left">已过时。请改用UNITY_IOS。</td></tr><tr><td style="text-align:right">UNITY_ANDROID</td><td style="text-align:left">适用于Android平台的#define指令。</td></tr><tr><td style="text-align:right">UNITY_PS4</td><td style="text-align:left">用于运行PlayStation 4代码的#define指令。</td></tr><tr><td style="text-align:right">UNITY_XBOXONE</td><td style="text-align:left">执行Xbox One #define指令代码。</td></tr><tr><td style="text-align:right">UNITY_TIZEN</td><td style="text-align:left">Tizen平台的#define指令。</td></tr><tr><td style="text-align:right">UNITY_TVOS</td><td style="text-align:left">Apple TV平台的#define指令。</td></tr><tr><td style="text-align:right">UNITY_WSA</td><td style="text-align:left">通用Windows平台 #define指令。此外，NETFX_CORE是在针对.NET Core编译C＃文件和使用.NET 脚本后端时定义的。</td></tr><tr><td style="text-align:right">UNITY_WSA_10_0</td><td style="text-align:left">通用Windows平台的#define指令。另外，在针对.NET Core编译C＃文件时定义了WINDOWS_UWP。</td></tr><tr><td style="text-align:right">UNITY_WINRT</td><td style="text-align:left">与UNITY_WSA相同。</td></tr><tr><td style="text-align:right">UNITY_WINRT_10_0</td><td style="text-align:left">相当于UNITY_WSA_10_0</td></tr><tr><td style="text-align:right">UNITY_WEBGL</td><td style="text-align:left">WebGL #define指令。</td></tr><tr><td style="text-align:right">UNITY_FACEBOOK</td><td style="text-align:left">Facebook平台的#define指令（WebGL或Windows独立版）。</td></tr><tr><td style="text-align:right">UNITY_ADS</td><td style="text-align:left">#define指令，用于从您的游戏代码中调用Unity Ads方法。5.2及更高版本。</td></tr><tr><td style="text-align:right">UNITY_ANALYTICS</td><td style="text-align:left">用于调用Unity Analytics的 #define指令为游戏代码方法。5.2及更高版本。</td></tr><tr><td style="text-align:right">UNITY_ASSERTIONS</td><td style="text-align:left">断言控制进程的#define指令。</td></tr></tbody></table><p>　　这里插入一下MarkDown插入表格的技巧：<a href="https://blog.csdn.net/maxsky/article/details/54666998" rel="external nofollow noopener noreferrer" target="_blank">Markdown 表格之调整宽度技巧</a></p><p><img src="/contentimg/25/1.png" alt="Result pic 1" title="源文件"></p><p>还有给定版本号XYZ</p><blockquote><p> Unity以下列格式公开三个全局#define指令：UNITY_X，UNITY_X_Y和UNITY_X_Y_Z</p></blockquote><p>例如：Unity 5.0.1指令的示例：</p><table><thead><tr><th style="text-align:right">定义</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:right">UNITY_5</td><td style="text-align:left">每个5.XY版本都公开了Unity 5发行版的#define指令。</td></tr><tr><td style="text-align:right">UNITY_5_0</td><td style="text-align:left">主要版本Unity 5.0的#define指令，在每个5.0.Z版本中公开。</td></tr><tr><td style="text-align:right">UNITY_5_0_1</td><td style="text-align:left">Unity 5.0.1次要版本的#define指令。</td></tr></tbody></table><p>还能以UNITY_X_Y_OR_NEWER格式来有选择地编译代码。</p><table><thead><tr><th style="text-align:right">定义</th><th style="text-align:left">作用</th></tr></thead><tbody><tr><td style="text-align:right">ENABLE_MONO</td><td style="text-align:left">为Mono编写后端#define脚本。</td></tr><tr><td style="text-align:right">ENABLE_IL2CPP</td><td style="text-align:left">用于IL2CPP的脚本后端#define 。</td></tr><tr><td style="text-align:right">ENABLE_DOTNET</td><td style="text-align:left">脚本编写后端#define for .NET。</td></tr><tr><td style="text-align:right">NETFX_CORE</td><td style="text-align:left">在.NET上针对.NET Core类库构建脚本时定义。</td></tr><tr><td style="text-align:right">NET_2_0</td><td style="text-align:left">在Mono和IL2CPP上针对.NET 2.0 API兼容级别构建脚本时定义。</td></tr><tr><td style="text-align:right">NET_2_0_SUBSET</td><td style="text-align:left">在Mono和IL2CPP上针对.NET 2.0 Subset API兼容级别构建脚本时定义。</td></tr><tr><td style="text-align:right">NET_4_6</td><td style="text-align:left">在Mono和IL2CPP上针对.NET 4.x API兼容级别构建脚本时定义。</td></tr><tr><td style="text-align:right">NET_STANDARD_2_0</td><td style="text-align:left">在Mono和IL2CPP上针对.NET Standard 2.0 API兼容级别构建脚本时定义。</td></tr><tr><td style="text-align:right">ENABLE_WINMD_SUPPORT</td><td style="text-align:left">在IL2CPP和.NET上启用Windows运行时支持时定义。有关详细信息，请参阅<a href="https://docs.unity3d.com/Manual/IL2CPP-WindowsRuntimeSupport.html" rel="external nofollow noopener noreferrer" target="_blank">Windows运行时支持</a>  。</td></tr></tbody></table>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文记录Unity的平台预编译指令。&lt;/p&gt;
    
    </summary>
    
      <category term="Unity" scheme="https://YaojiaxinPC.github.io/categories/Unity/"/>
    
    
      <category term="指令" scheme="https://YaojiaxinPC.github.io/tags/%E6%8C%87%E4%BB%A4/"/>
    
  </entry>
  
  <entry>
    <title>5个简单算法</title>
    <link href="https://YaojiaxinPC.github.io/24algorithm_1/"/>
    <id>https://YaojiaxinPC.github.io/24algorithm_1/</id>
    <published>2018-10-23T00:07:59.000Z</published>
    <updated>2018-10-23T04:04:53.674Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文介绍五个算法小题目：</p><ol><li>四个不同数字组成互不相等且不重复的三位数。</li><li>斐波那契数列。</li><li>字符串转整型。</li><li>简单逻辑思考题。</li><li>数组移动</li></ol><a id="more"></a><p>　　分享一下博客上看到的一些算法题：</p><h2 id="四个数字组成三位数"><a href="#四个数字组成三位数" class="headerlink" title="四个数字组成三位数"></a>四个数字组成三位数</h2><p>　　有数字：1、2、3、4，请问能组成多少个互不相同且无重复数字的三位数？请输出这些数字。</p><h3 id="解法"><a href="#解法" class="headerlink" title="解法"></a>解法</h3><p>　　三位数，百位数有4种选择，则十位数有3种选择，从而个位数只有2种选择。共4x3x2=24种情况。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">4</span>; i++)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">1</span>; j &lt;= <span class="number">4</span>; j++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i == j) <span class="keyword">continue</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">1</span>; k &lt;= <span class="number">4</span>; k++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (j == k || k == i) <span class="keyword">continue</span>;</span><br><span class="line"> </span><br><span class="line">            count++;</span><br><span class="line">            Console.WriteLine(<span class="string">"第&#123;1&#125;种情况：&#123;0&#125;"</span>, i * <span class="number">100</span> + j * <span class="number">10</span> + k, count.ToString(<span class="string">"00"</span>));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>　　如果要写能处理不同输入数字数量的，就得用递归：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// &lt;summary&gt;</span></span><br><span class="line"><span class="comment">/// 题目：有数字：1、2、3、4，请问能组成多少个互不相同且无重复数字的三位数？请输出这些数字。</span></span><br><span class="line"><span class="comment">/// &lt;/summary&gt;</span></span><br><span class="line">public class NumToInt : IGetResult</span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">ConsoleOut</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        List&lt;<span class="keyword">int</span>&gt; inputlst = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;() &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span> &#125;;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] inputnums = inputlst.ToArray();</span><br><span class="line">        List&lt;<span class="keyword">int</span>&gt; result = NumToIntMethod(inputnums);</span><br><span class="line">        StringBuilder txt = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">if</span> (result.Count &gt; <span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            txt.Append(<span class="string">"结果共 "</span> + result.Count + <span class="string">" 个；分别是： "</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; result.Count; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span> (i &lt; result.Count - <span class="number">1</span>) txt.Append(result[i] + <span class="string">"、 "</span>);</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    txt.Append(result[i]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            txt.Append(<span class="string">"存在重复数字，请重新输入！"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Console.WriteLine(txt.ToString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// &lt;summary&gt;</span></span><br><span class="line">    <span class="comment">/// 输入有多少数字，组合排序后输出结果</span></span><br><span class="line">    <span class="comment">/// &lt;/summary&gt;</span></span><br><span class="line">    <span class="comment">/// &lt;param name="inputnum"&gt;&lt;/param&gt;</span></span><br><span class="line">    <span class="comment">/// &lt;returns&gt;&lt;/returns&gt;</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> List&lt;<span class="keyword">int</span>&gt; <span class="title">NumToIntMethod</span><span class="params">(<span class="keyword">int</span>[] inputnum)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        List&lt;<span class="keyword">int</span>&gt; results = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//去除重复值</span></span><br><span class="line">        <span class="keyword">int</span>[] hassamenum = inputnum.GroupBy(i =&gt; i).Select(i =&gt; i.Key).ToArray();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//不存在重复值</span></span><br><span class="line">        <span class="keyword">if</span> (hassamenum.Count() == inputnum.Count())</span><br><span class="line">        &#123;</span><br><span class="line">            GetNum(<span class="number">0</span>, inputnum.ToList(),ref results);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> results;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/// &lt;summary&gt;</span></span><br><span class="line">    <span class="comment">///  递归调用</span></span><br><span class="line">    <span class="comment">/// &lt;/summary&gt;</span></span><br><span class="line">    <span class="comment">/// &lt;param name="beforenum"&gt;前面组合的数字&lt;/param&gt;</span></span><br><span class="line">    <span class="comment">/// &lt;param name="leftlst"&gt;剔除掉已选数字后的集合&lt;/param&gt;</span></span><br><span class="line">    <span class="comment">/// &lt;param name="alllst"&gt;全部结果总集合&lt;/param&gt;</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">GetNum</span><span class="params">(<span class="keyword">int</span> beforenum, List&lt;<span class="keyword">int</span>&gt; leftlst, ref List&lt;<span class="keyword">int</span>&gt; alllst)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">//只剩最后一个数字，表示可以输出结果</span></span><br><span class="line">        <span class="keyword">if</span> (leftlst.Count == <span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (!alllst.Contains(beforenum))<span class="comment">//检查是否重复，99.9%概率不会重复</span></span><br><span class="line">            &#123;</span><br><span class="line">                alllst.Add(beforenum);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                Console.WriteLine(<span class="string">"重复！"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; leftlst.Count; i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//将前面的数字组合</span></span><br><span class="line">            <span class="keyword">int</span> tmpnum = beforenum * <span class="number">10</span> + leftlst[i];</span><br><span class="line">            List&lt;<span class="keyword">int</span>&gt; tmplst = <span class="keyword">new</span> List&lt;<span class="keyword">int</span>&gt;();</span><br><span class="line">            tmplst.AddRange(leftlst);</span><br><span class="line">            <span class="comment">//剔除已组合的数字</span></span><br><span class="line">            tmplst.RemoveAt(i);</span><br><span class="line"></span><br><span class="line">            GetNum(tmpnum, tmplst, ref alllst);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="斐波那契数列"><a href="#斐波那契数列" class="headerlink" title="斐波那契数列"></a><a href="https://baike.baidu.com/item/斐波那契数列/99145?fr=aladdin" rel="external nofollow noopener noreferrer" target="_blank">斐波那契数列</a></h2><p>　　有一列数：1、1、2、3、5……求第30个数。</p><h3 id="解法-1"><a href="#解法-1" class="headerlink" title="解法"></a>解法</h3><p>　　第i个数等于第(i-1)个数+第(i-2)个数。使用递归。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">GetNum</span><span class="params">(<span class="keyword">int</span> index)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (index &lt;= <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (index &lt;= <span class="number">2</span>) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> (GetNum(index - <span class="number">1</span>) + GetNum(index - <span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>　　这里提一下我们在朋友圈经常看到的一个斐波那契数列应用：<a href="https://zhidao.baidu.com/question/287761267.html" rel="external nofollow noopener noreferrer" target="_blank">切割巧克力</a></p><p>　　某人把一个8x8的巧克力切成4块，却能拼成一个5x13的长方形==》64 = 65?!</p><p>　　其实这里就是利用了斐波那契数列的这个性质：5、8、13正是数列中相邻的三个项！每个奇数项的平方都比前后两项之积多1，每个偶数项的平方都比前后两项之积少1。加上另一个特性：前一项与后一项之比越来越接近黄金分割。</p><h2 id="字符串转整型"><a href="#字符串转整型" class="headerlink" title="字符串转整型"></a>字符串转整型</h2><p>　　将用户输入的字符串，不用系统api转化为整型。</p><h3 id="解法-2"><a href="#解法-2" class="headerlink" title="解法"></a>解法</h3><p>　　依靠ASCII，或者每个char与0的差值，判断是否为数字，是否10之内。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">GetNum</span><span class="params">(string str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> num = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">int</span> gap = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; str.Length; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        gap = str[i] - <span class="string">'0'</span>;</span><br><span class="line">        <span class="keyword">if</span> (gap &lt; <span class="number">0</span> || gap &gt;= <span class="number">10</span>) <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">        num = num * <span class="number">10</span> + gap;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="逻辑思考题"><a href="#逻辑思考题" class="headerlink" title="逻辑思考题"></a>逻辑思考题</h2><p>　　A、B、C、D、E五个学生计划报名参加活动，请根据以下条件判断谁真正参加活动：</p><ol><li><p>A参加，B也参加；</p></li><li><p>B和C只有一个人参加；</p></li><li><p>C和D或者都参加，或者都不参加；</p></li><li><p>D和E中至少有一个人参加；</p></li><li><p>如果E参加，那么A和D也参加。</p></li></ol><h3 id="解法-3"><a href="#解法-3" class="headerlink" title="解法"></a>解法</h3><p>　　1，0为参加或者不参加；设置5个循环进行判断，将条件转化成对应的值判断进行循环。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">char</span>[] name = &#123; <span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>, <span class="string">'E'</span> &#125;;</span><br><span class="line"><span class="keyword">int</span>[] value = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">5</span>];</span><br><span class="line"><span class="keyword">for</span> (value[<span class="number">0</span>] = <span class="number">0</span>; value[<span class="number">0</span>] &lt; <span class="number">2</span>; value[<span class="number">0</span>]++) <span class="comment">// &lt; 2 取0、1两个值</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">for</span> (value[<span class="number">1</span>] = <span class="number">0</span>; value[<span class="number">1</span>] &lt; <span class="number">2</span>; value[<span class="number">1</span>]++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">for</span> (value[<span class="number">2</span>] = <span class="number">0</span>; value[<span class="number">2</span>] &lt; <span class="number">2</span>; value[<span class="number">2</span>]++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span> (value[<span class="number">3</span>] = <span class="number">0</span>; value[<span class="number">3</span>] &lt; <span class="number">2</span>; value[<span class="number">3</span>]++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span> (value[<span class="number">4</span>] = <span class="number">0</span>; value[<span class="number">4</span>] &lt; <span class="number">2</span>; value[<span class="number">4</span>]++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>((value[<span class="number">1</span>]&gt;=value[<span class="number">0</span>]) <span class="comment">//B不参加时，A肯定不参加；B参加时，A不一定参加</span></span><br><span class="line">                        &amp;&amp;(value[<span class="number">1</span>]+value[<span class="number">2</span>]==<span class="number">1</span>)</span><br><span class="line">                        &amp;&amp;(value[<span class="number">2</span>]==value[<span class="number">3</span>])</span><br><span class="line">                        &amp;&amp;(value[<span class="number">3</span>]+value[<span class="number">4</span>] ==<span class="number">1</span>)</span><br><span class="line">                        &amp;&amp;(value[<span class="number">4</span>]==<span class="number">0</span> </span><br><span class="line">                        ||(value[<span class="number">4</span>] == <span class="number">1</span>&amp;&amp;value[<span class="number">0</span>] ==<span class="number">1</span> &amp;&amp; value[<span class="number">3</span>] ==<span class="number">1</span>)))</span><br><span class="line">                        &#123;</span><br><span class="line">                        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; value.Length; i++)</span><br><span class="line">                            &#123;</span><br><span class="line">                                <span class="keyword">if</span> (value[i] == <span class="number">1</span>)</span><br><span class="line">                                    Console.WriteLine(<span class="string">"&#123;0&#125;参加"</span>,name[i]);</span><br><span class="line">                                <span class="keyword">else</span></span><br><span class="line">                                    Console.WriteLine(<span class="string">"&#123;0&#125;不参加"</span>, name[i]);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>　　该逻辑思考题比较有趣，第一次看到这样和代码结合起来的逻辑题。    </p><h2 id="数组移动"><a href="#数组移动" class="headerlink" title="数组移动"></a><a href="https://www.cnblogs.com/I-am-Betty/p/3611518.html" rel="external nofollow noopener noreferrer" target="_blank">数组移动</a></h2><p>　　这个得推荐去链接中的<a href="https://www.cnblogs.com/I-am-Betty/p/3611518.html" rel="external nofollow noopener noreferrer" target="_blank">博客</a> 仔细看，想法很新奇的。</p><p>这里简单拿一个来讲：</p><p>　　把数组元素前后部分交换 MoveFirstPartOfArrayToTheEnd(int[] array, int index) 比如 {1,2,3,4,5,6,7} 3  =&gt; {4,5,6,7,1,2,3}</p><h3 id="解法-4"><a href="#解法-4" class="headerlink" title="解法"></a>解法</h3><p>　　简单处理：把1-2-3排后面；然后从头开始把剩下的排进去。</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">GetNum</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> index = <span class="number">3</span>;</span><br><span class="line">    <span class="keyword">int</span>[] aa = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">7</span>] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> &#125;;</span><br><span class="line">    <span class="keyword">int</span>[] bb = <span class="keyword">new</span> <span class="keyword">int</span>[aa.Count()];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; aa.Count(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (i &lt; index)</span><br><span class="line">        &#123;</span><br><span class="line">            bb[i + (aa.Count() - index)] = aa[i];</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            bb[i - index] = aa[i];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    foreach (<span class="keyword">var</span> item in bb)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>　　上面的处理思想一般般，该题主要是了解链接中反转的用法：</p><ol><li><p>分段1，2，3—4，5，6，7</p></li><li><p>分段反转3，2，1 — 7，6，5，4</p></li><li><p>整体反转4，5，6，7，1，2，3</p></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ReverseNums</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span>[] aa = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">7</span>] &#123; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span> &#125;;</span><br><span class="line">    <span class="keyword">int</span>[] a1 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a1.Count(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a1[i] = aa[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">int</span>[] a2 = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">7</span> - <span class="number">3</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a2.Count(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        a2[i] = aa[i + a1.Count()];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> b1 = a1.Reverse().ToArray();</span><br><span class="line">    <span class="keyword">var</span> b2 = a2.Reverse().ToArray();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a1.Count(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        aa[i] = b1[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; a2.Count(); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        aa[i + a1.Count()] = b2[i];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> bb = aa.Reverse().ToArray();</span><br><span class="line"></span><br><span class="line">    foreach (<span class="keyword">var</span> item in bb)</span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(item);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> git代码库: <a href="https://github.com/YaojiaxinPC/hexoblog/tree/master/AlgorithmDemo" rel="external nofollow noopener noreferrer" target="_blank">Codes</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文介绍五个算法小题目：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;四个不同数字组成互不相等且不重复的三位数。&lt;/li&gt;
&lt;li&gt;斐波那契数列。&lt;/li&gt;
&lt;li&gt;字符串转整型。&lt;/li&gt;
&lt;li&gt;简单逻辑思考题。&lt;/li&gt;
&lt;li&gt;数组移动&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="算法" scheme="https://YaojiaxinPC.github.io/categories/%E7%AE%97%E6%B3%95/"/>
    
    
      <category term="C#" scheme="https://YaojiaxinPC.github.io/tags/C/"/>
    
  </entry>
  
  <entry>
    <title>Unity发布WebGL---360等部分浏览器不支持</title>
    <link href="https://YaojiaxinPC.github.io/23unitywebgl360error/"/>
    <id>https://YaojiaxinPC.github.io/23unitywebgl360error/</id>
    <published>2018-10-22T13:07:59.000Z</published>
    <updated>2018-10-22T16:00:27.728Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文介绍三种版本Unity发布WebGL对浏览器的影响问题：</p><ol><li>2018.2全新支持WebAssembly，支持内存动态调配，极大压缩包大小。</li><li>5.5.0能发布Release版本，但是在360等浏览器上会抛异常；再往上的版本只能发布Build版本。</li><li>5.4.6以下版本，发布Release版本，支持360等浏览器运行。</li></ol><a id="more"></a><p>　　准备在博客上发一个小游戏demo，结果在360抛异常了，在chrome上是可以的，手机上也行。所以webgl是没问题的，推测是unity编译器的问题。但是搜索上找不到关键字。可能没什么人关注这个问题吧，毕竟都是用在手游上的。</p><p>　　通过浏览器调试工具，排查到是缺少“decompress.js”，比较了一下，编译出来”.unityweb”后缀的，都是没有“UnityConfig”文件夹。由于不同版本生成的UnityLoader.js不同，调用工具的步骤已经不同了，才导致360等低版本的浏览器打不开新Unity特性的WebGL程序。</p><p><img src="/contentimg/23/12.png" alt="Result pic 1" title="WebGLSupport目录比较"></p><p>　　由于C++方面和编译器有关，好多用2008可以编译，但是2010开始的会抛异常。所以就尝试用5.x的来编译。结果很神奇，出来的包不一样，是Release文件夹！之前用2017是Build文件夹。没想到360竟然这次跑成功了！</p><p>　　由此推断是webgl版本问题。接着是一个一个版本的更新看，5.5的更新还有提到gz，后面的没提到，下载了5.6的，编译出来是build；所以再找5.5的，终于是Release，但是360上抛异常了。那往前一个版本，5.4.6，正常运行！</p><p>　　下面是3个版本的运行情况：</p><h3 id="2018-2-13f1-WebAssembly模式"><a href="#2018-2-13f1-WebAssembly模式" class="headerlink" title="2018.2.13f1-WebAssembly模式"></a>2018.2.13f1-WebAssembly模式</h3><p>　　由于WebAssembly的比较亮点：包小很多，而且能动态申请内存，可以一开始就申请32m（其他版本的都得申请64m）。这里就选该模式。</p><p><img src="/contentimg/23/1.png" alt="Result pic 1" title="Chrome控制台输出"></p><p><img src="/contentimg/23/2.png" alt="Result pic 1" title="文件包大小"></p><p><img src="/contentimg/23/3.png" alt="Result pic 1" title="浏览器请求情况"></p><h3 id="2017-4-3f1"><a href="#2017-4-3f1" class="headerlink" title="2017.4.3f1"></a>2017.4.3f1</h3><p>　　WebAssembly模式在该版本是测试版，编译出来的包太大，而且运行还抛异常，这里就不提这个。</p><p><img src="/contentimg/23/4.png" alt="Result pic 1" title="Chrome控制台输出"></p><p><img src="/contentimg/23/5.png" alt="Result pic 1" title="文件包大小"></p><p><img src="/contentimg/23/6.png" alt="Result pic 1" title="浏览器请求情况"></p><h3 id="5-4-6f3"><a href="#5-4-6f3" class="headerlink" title="5.4.6f3"></a>5.4.6f3</h3><p>　　能编译出来360正常运行的版本中最新的一个。</p><p><img src="/contentimg/23/7.png" alt="Result pic 1" title="Chrome控制台输出"></p><p><img src="/contentimg/23/8.png" alt="Result pic 1" title="文件包大小"></p><p><img src="/contentimg/23/9.png" alt="Result pic 1" title="浏览器请求情况"></p><h2 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h2><p>　　通过前面三个版本的比较。推荐：</p><ol><li>简单的小游戏用5.4.6发布，请求量少，支持的浏览器多；</li><li>复杂的游戏用2018.2发布，包压缩率高，动态内存，但是手机上打开会提示请求摄像头权限？（可能存在扫描设备的代码）</li><li>中间的版本优势不大。通过Profiler工具的比较，2018的优势&gt;&gt;5.4.6</li></ol><p><img src="/contentimg/23/10.png" alt="Result pic 1" title="2018内存分配"></p><p><img src="/contentimg/23/11.png" alt="Result pic 1" title="5.4.6内存分配"></p><p>　　两个的代码和设置是一样的，但是Textures相差一倍，Textures是优化中最重要的一个，2018的竟然能帮我们直接优化了一倍。还有Assets的数量，也是一倍的差距。</p><p>　　再加上OpenGL ES3.0的优势，所以，复杂点的游戏，还是推荐用2018.2！</p><p>　　文末贴一下介绍2018.2的WebAssembly的一个中文链接：</p><p> <a href="http://forum.china.unity3d.com/thread-32663-1-1.html" rel="external nofollow noopener noreferrer" target="_blank">Unity 2018.2正式支持WebAssembly</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文介绍三种版本Unity发布WebGL对浏览器的影响问题：&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;2018.2全新支持WebAssembly，支持内存动态调配，极大压缩包大小。&lt;/li&gt;
&lt;li&gt;5.5.0能发布Release版本，但是在360等浏览器上会抛异常；再往上的版本只能发布Build版本。&lt;/li&gt;
&lt;li&gt;5.4.6以下版本，发布Release版本，支持360等浏览器运行。&lt;/li&gt;
&lt;/ol&gt;
    
    </summary>
    
      <category term="Unity3D" scheme="https://YaojiaxinPC.github.io/categories/Unity3D/"/>
    
    
      <category term="webgl" scheme="https://YaojiaxinPC.github.io/tags/webgl/"/>
    
      <category term="环境" scheme="https://YaojiaxinPC.github.io/tags/%E7%8E%AF%E5%A2%83/"/>
    
  </entry>
  
  <entry>
    <title>Unity入门官方案例---2D Roguelike</title>
    <link href="https://YaojiaxinPC.github.io/22Roguelike/"/>
    <id>https://YaojiaxinPC.github.io/22Roguelike/</id>
    <published>2018-10-20T16:07:59.000Z</published>
    <updated>2018-10-22T16:18:20.023Z</updated>
    
    <content type="html"><![CDATA[<p>　　介绍一下接触到的好的Unity官方作品：<a href="https://assetstore.unity.com/packages/essentials/tutorial-projects/2d-roguelike-29825" rel="external nofollow noopener noreferrer" target="_blank">2D Roguelike</a>   。</p><a id="more"></a><p><img src="/contentimg/22/1.jpg" alt="Result pic 1" title="2D Roguelike"></p><h2 id="游戏简介"><a href="#游戏简介" class="headerlink" title="游戏简介"></a>游戏简介</h2><p>　　该小游戏是2D类型，操作只有上下左右4个方向的移动，每动一下消耗1点能量，能量通过吃到食物补充；场景中有墙阻挡，需要撞4下墙才会销毁，同时还有怪物追击，被攻击到会大量消耗能量。</p><p>　　由于场景中的食物是固定的，吃了就没了，所以就设置了一个刷新点：“exit出口”，每到达一次，就能刷新一下全图场景，同时作为天数记录+1天。</p><p>　　游戏以天数为关卡记录。</p><p>　　待续…</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　介绍一下接触到的好的Unity官方作品：&lt;a href=&quot;https://assetstore.unity.com/packages/essentials/tutorial-projects/2d-roguelike-29825&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;2D Roguelike&lt;/a&gt;   。&lt;/p&gt;
    
    </summary>
    
      <category term="Unity3D" scheme="https://YaojiaxinPC.github.io/categories/Unity3D/"/>
    
    
      <category term="游戏开发" scheme="https://YaojiaxinPC.github.io/tags/%E6%B8%B8%E6%88%8F%E5%BC%80%E5%8F%91/"/>
    
      <category term="2D" scheme="https://YaojiaxinPC.github.io/tags/2D/"/>
    
      <category term="入门级" scheme="https://YaojiaxinPC.github.io/tags/%E5%85%A5%E9%97%A8%E7%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>abowman&#39;s demo</title>
    <link href="https://YaojiaxinPC.github.io/21swfobjectdemo/"/>
    <id>https://YaojiaxinPC.github.io/21swfobjectdemo/</id>
    <published>2018-10-19T16:07:59.000Z</published>
    <updated>2018-10-20T17:01:50.083Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文分享<a href="https://github.com/swfobject/swfobject" rel="external nofollow noopener noreferrer" target="_blank">swfobject</a>   插件的简单使用，展示abowman上面的3个小挂饰。</p><a id="more"></a><p>　　swfobject的git代码里面已经包了一个自动生成html的功能，所以实际是去找swf动画，加进去就可以看到效果了。</p><p>　　小鱼挂饰：<a id="download" href="/contentimg/21/fish.swf" download="fish.swf"><i class="fa fa-download"></i><span> Download fish.swf </span><br></a></p><p><div style="width:100%; height:450px;border:none;text-align:center"><iframe allowtransparency="yes" frameborder="0" width="400" height="400" src="/contentimg/21/fish.html"></iframe></div></p><p>　　宠物鼠挂饰：<a id="download" href="/contentimg/21/hamster.swf" download="hamster.swf"><i class="fa fa-download"></i><span> Download hamster.swf </span><br></a></p><p><div style="width:100%; height:450px;border:none;text-align:center"><iframe allowtransparency="yes" frameborder="0" width="400" height="400" src="/contentimg/21/hamster.html"></iframe></div></p><p>　　企鹅群挂饰：<a id="download" href="/contentimg/21/penguins.swf" download="penguins.swf"><i class="fa fa-download"></i><span> Download penguins.swf </span><br></a></p><p><div style="width:100%; height:450px;border:none;text-align:center"><iframe allowtransparency="yes" frameborder="0" width="400" height="400" src="/contentimg/21/penguins.html"></iframe></div></p><p><img src="/contentimg/21/1.png" alt="Result pic 1" title="html代码自动生成"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文分享&lt;a href=&quot;https://github.com/swfobject/swfobject&quot; rel=&quot;external nofollow noopener noreferrer&quot; target=&quot;_blank&quot;&gt;swfobject&lt;/a&gt;   插件的简单使用，展示abowman上面的3个小挂饰。&lt;/p&gt;
    
    </summary>
    
      <category term="前端" scheme="https://YaojiaxinPC.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="abowman" scheme="https://YaojiaxinPC.github.io/tags/abowman/"/>
    
      <category term="swf" scheme="https://YaojiaxinPC.github.io/tags/swf/"/>
    
      <category term="flash" scheme="https://YaojiaxinPC.github.io/tags/flash/"/>
    
      <category term="swfobject" scheme="https://YaojiaxinPC.github.io/tags/swfobject/"/>
    
  </entry>
  
  <entry>
    <title>百度sitemap和谷歌sitemap同时使用不同的url</title>
    <link href="https://YaojiaxinPC.github.io/20sitemap2url/"/>
    <id>https://YaojiaxinPC.github.io/20sitemap2url/</id>
    <published>2018-10-19T16:07:59.000Z</published>
    <updated>2018-10-20T13:35:30.441Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文分享如果在同一次hexo g中，百度sitemap和谷歌sitemap使用不同的url。</p><a id="more"></a><p>　　目前我挂谷歌是挂github的链接，而挂百度使用域名。但是默认配置文件中的url只有一个。这样每次生成，他们都会使用那个默认url。这样得生成两次，分开提交才能做好。</p><p>　　真有必要这么麻烦吗？</p><p>　　于是我开始找“node_modules”文件夹里面的源码。</p><p>　　谷歌的sitemap生成源码里：</p><p><img src="/contentimg/20/1.png" alt="Result pic 1" title="hexo-generator-sitemap源码"></p><p>　　是直接拿到hexo.config.sitemap，然后就是generator.js，这样绕进去找。得绕有点久。那先看看百度那边。</p><p><img src="/contentimg/20/2.png" alt="Result pic 1" title="hexo-generator-baidu-sitemap源码"></p><p><img src="/contentimg/20/3.png" alt="Result pic 1" title="baidusitemap.ejs源码"></p><p>　　有戏，使用的不是同一个sitemap，然后在baidusitemap.ejs里面又读了一次url！</p><p>　　那就好办了，在百度sitemap那里多写一个url就搞定了：</p><p><img src="/contentimg/20/4.png" alt="Result pic 1" title="baidusitemap下多加一个url"></p><p>　　搞定，一次hexo g。两个sitemap的域名是不同的了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文分享如果在同一次hexo g中，百度sitemap和谷歌sitemap使用不同的url。&lt;/p&gt;
    
    </summary>
    
      <category term="源码分析" scheme="https://YaojiaxinPC.github.io/categories/%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"/>
    
    
      <category term="hexo源码" scheme="https://YaojiaxinPC.github.io/tags/hexo%E6%BA%90%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>markdown扩展</title>
    <link href="https://YaojiaxinPC.github.io/19markdownextend/"/>
    <id>https://YaojiaxinPC.github.io/19markdownextend/</id>
    <published>2018-10-18T16:07:59.000Z</published>
    <updated>2018-10-20T05:29:49.263Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文分享markdown的妙用：插入本地文件。</p><a id="more"></a><p>　　前一篇博客，我插入了一个pdf文件。</p><p>实际上是这样写的：</p><p><img src="/contentimg/19/1.png" alt="Result pic 1" title="源文件"></p><p>　　还能这样写（使用html，并加入图标）：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;a id=&quot;download&quot; href=&quot;/contentimg/18/Office-2019.pdf&quot;&gt;&lt;i class=&quot;fa fa-download&quot;&gt;&lt;/i&gt;&lt;span&gt; Download PDF &lt;/span&gt;</span><br><span class="line">&lt;/a&gt;</span><br></pre></td></tr></table></figure><p>　　这里也放一下pdf转html的一个网站吧，速度蛮快的：</p><p><a href="http://app.xunjiepdf.com/pdf2html" rel="external nofollow noopener noreferrer" target="_blank">迅捷PDF在线转换器</a></p><p>　　转化完下载下来是一个压缩包，解压放到工程中，然后到主配置文件修改：</p><p><img src="/contentimg/19/2.png" alt="Result pic 2" title="_config.yml"></p><p>　　提醒hexo忽略编译该文件夹。然后清理整个工程：hexo clean。再生成和发布，就可以使用了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文分享markdown的妙用：插入本地文件。&lt;/p&gt;
    
    </summary>
    
      <category term="markdown扩展" scheme="https://YaojiaxinPC.github.io/categories/markdown%E6%89%A9%E5%B1%95/"/>
    
    
      <category term="markdown" scheme="https://YaojiaxinPC.github.io/tags/markdown/"/>
    
  </entry>
  
  <entry>
    <title>office2019破解安装版</title>
    <link href="https://YaojiaxinPC.github.io/18office2019/"/>
    <id>https://YaojiaxinPC.github.io/18office2019/</id>
    <published>2018-10-18T16:06:59.000Z</published>
    <updated>2018-10-20T17:02:16.156Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文分享破解吧看到的office2019的破解安装。</p><a id="more"></a><p>　　在这里得感谢破解吧。上面好多破解版软件。在此提醒大家，请用于个人学习，勿用于商业用途。</p><p>　　下面引用破解吧的教程：</p><p><div style="width:100%; height:950px;border:none;text-align:center"><iframe allowtransparency="yes" frameborder="0" width="850" height="800" src="/contentimg/18/Office-2019.pdf.html"></iframe></div></p><p>　　<a href="https://www.52pojie.cn/forum.php?mod=viewthread&amp;tid=781052&amp;tdsourcetag=s_pcqq_aiomsg" rel="external nofollow noopener noreferrer" target="_blank">原文地址</a> </p><p>　　<a href="https://otp.landian.la/zh-cn/" rel="external nofollow noopener noreferrer" target="_blank">OTP地址</a> </p><p>　　<a id="download" href="/contentimg/18/Office-2019.pdf" download="Office-2019.pdf"><i class="fa fa-download"></i><span> Download PDF </span><br></a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文分享破解吧看到的office2019的破解安装。&lt;/p&gt;
    
    </summary>
    
      <category term="软件破解包" scheme="https://YaojiaxinPC.github.io/categories/%E8%BD%AF%E4%BB%B6%E7%A0%B4%E8%A7%A3%E5%8C%85/"/>
    
    
      <category term="office" scheme="https://YaojiaxinPC.github.io/tags/office/"/>
    
      <category term="破解吧" scheme="https://YaojiaxinPC.github.io/tags/%E7%A0%B4%E8%A7%A3%E5%90%A7/"/>
    
  </entry>
  
  <entry>
    <title>github security alert 解决之路</title>
    <link href="https://YaojiaxinPC.github.io/17git-securityalert/"/>
    <id>https://YaojiaxinPC.github.io/17git-securityalert/</id>
    <published>2018-10-18T16:05:59.000Z</published>
    <updated>2018-10-19T06:12:54.316Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/contentimg/17/1.png" alt="Result pic 1" title="github security alert "></p><p>　　本文记录我遇到github的“security alert”时，怎么处理解决。</p><a id="more"></a><p>　　邮箱收到这个警告的时候蛮懵的，因为代码什么的没改过。最近做的操作，就是手动修改了“package.json”，以及删除“package-lock.json”文件和“node_modules”整个文件夹。后面重新安装，npm正常跑起来，博客也能正常更新，怎么就突然发警告了？</p><p>　　登陆git查看具体警告内容：</p><p><img src="/contentimg/17/2.png" alt="Result pic 2" title="具体警告内容"></p><p>　　原来是提示需要更新插件版本而已。</p><p>那就手动更新吧：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update XXX</span><br></pre></td></tr></table></figure><p>　　不对，说好的添加文件的提示怎么没出来，直接就回车返回了？</p><p>　　那强制更新到某版本</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm update XXX@1.2.3</span><br></pre></td></tr></table></figure><p>　　还是一样？那就只能用install了。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install XXX@1.2.3</span><br></pre></td></tr></table></figure><p><img src="/contentimg/17/4.png" alt="Result pic 4" title="成功更新"></p><p>　　再次提交博客环境工程，这次git不报警告了。</p><p><img src="/contentimg/17/3.png" alt="Result pic 3" title="问题解决"></p><p>最后贴一下“package.json”和“package-lock.json”关系的几个链接吧：</p><p><a href="https://blog.csdn.net/m18633778874/article/details/81625421" rel="external nofollow noopener noreferrer" target="_blank">【前端】简单了解package.json与package-lock.json</a> </p><p><a href="https://www.cnblogs.com/cangqinglang/p/8336754.html" rel="external nofollow noopener noreferrer" target="_blank">package-lock.json的作用</a> </p><p>　　简单讲就是package.json负责安装我们需要的工具，package-lock.json着负责把那些工具需要的包记录安装起来。由于lock文件很大，东西很多，一般我们不会去看，所以这时候就会遇到一些依赖包版本过低的问题。</p><p><img src="/contentimg/17/5.png" alt="Result pic 5" title="依赖关系"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/contentimg/17/1.png&quot; alt=&quot;Result pic 1&quot; title=&quot;github security alert &quot;&gt;&lt;/p&gt;
&lt;p&gt;　　本文记录我遇到github的“security alert”时，怎么处理解决。&lt;/p&gt;
    
    </summary>
    
      <category term="github疑难杂症" scheme="https://YaojiaxinPC.github.io/categories/github%E7%96%91%E9%9A%BE%E6%9D%82%E7%97%87/"/>
    
    
      <category term="github" scheme="https://YaojiaxinPC.github.io/tags/github/"/>
    
      <category term="security alert" scheme="https://YaojiaxinPC.github.io/tags/security-alert/"/>
    
  </entry>
  
  <entry>
    <title>VMWare安装Linux系统和mac系统</title>
    <link href="https://YaojiaxinPC.github.io/16VM_macandlinux/"/>
    <id>https://YaojiaxinPC.github.io/16VM_macandlinux/</id>
    <published>2018-10-18T16:04:59.000Z</published>
    <updated>2018-10-19T08:42:20.403Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文记录如何在VM虚拟机中装Linux系统和Mac系统。全文截图解说，打开会比较慢。</p><a id="more"></a><p>　　开头贴一下下载链接吧，版本有点老了：</p><p><a href="https://pan.baidu.com/s/1a6BF-GQ2Uwd25h8dw1WWKw" rel="external nofollow noopener noreferrer" target="_blank">百度云盘</a>  提取码：y9y9</p><p>　　系统就不提供了，可以去msdn等等地方下载。</p><p>　　下面开始贴图说明安装过程：</p><h2 id="Mac安装"><a href="#Mac安装" class="headerlink" title="Mac安装"></a>Mac安装</h2><p><img src="/contentimg/16/1/1.png" alt="Result pic 1" title="使用unlock打补丁"></p><p><img src="/contentimg/16/1/2.png" alt="Result pic 1" title="VMWare出现mac的选项"></p><p><img src="/contentimg/16/1/3.png" alt="Result pic 1" title="开始安装"></p><p><img src="/contentimg/16/1/4.png" alt="Result pic 1" title="选择语言"></p><p><img src="/contentimg/16/1/5.png" alt="Result pic 1" title="安装初始化界面"></p><p>　　第一次装的时候，由于系统磁盘格式问题，会出问题：</p><p><img src="/contentimg/16/1/6.png" alt="Result pic 1" title="直接选择“重新安装os x”"></p><p><img src="/contentimg/16/1/7.png" alt="Result pic 1" title="没显示磁盘？？？"></p><p>　　所以得返回：（当然一开始就得先搞磁盘，再来安装才对）</p><p><img src="/contentimg/16/1/8.png" alt="Result pic 1" title="左上角退出安装"></p><p><img src="/contentimg/16/1/9.png" alt="Result pic 1" title="选择磁盘工具"><br>　　<br><img src="/contentimg/16/1/10.png" alt="Result pic 1" title="格式化磁盘"></p><p><img src="/contentimg/16/1/11.png" alt="Result pic 1" title="格式化后出现可识别磁盘"></p><p><img src="/contentimg/16/1/12.png" alt="Result pic 1" title="回到安装系统界面"></p><p><img src="/contentimg/16/1/13.png" alt="Result pic 1" title="选择刚才的磁盘开始安装"></p><p><img src="/contentimg/16/1/14.png" alt="Result pic 1" title="安装开始"></p><p><img src="/contentimg/16/1/15.png" alt="Result pic 1" title="完成"></p><p><img src="/contentimg/16/1/16.png" alt="Result pic 1" title="重启，选择语言"></p><p><img src="/contentimg/16/1/17.png" alt="Result pic 1" title="选择时区"></p><p>　　注意中国在右边。</p><p><img src="/contentimg/16/1/18.png" alt="Result pic 1" title="进入系统界面"></p><p><img src="/contentimg/16/1/19.png" alt="Result pic 1" title="安装VMtool"></p><p>　　右下角，把光驱引用的文件定位到打补丁时增加的darwin文件。具体在安装目录下能找到。</p><p><img src="/contentimg/16/1/20.png" alt="Result pic 1" title="重新连接光驱"></p><p><img src="/contentimg/16/1/21.png" alt="Result pic 1" title="选择安装位置"></p><p><img src="/contentimg/16/1/22.png" alt="Result pic 1" title="完成安装"></p><p><img src="/contentimg/16/1/23.png" alt="Result pic 1" title="重启"></p><p><img src="/contentimg/16/1/24.png" alt="Result pic 1" title="开始使用"></p><h2 id="CentOS安装"><a href="#CentOS安装" class="headerlink" title="CentOS安装"></a>CentOS安装</h2><p>　　Linux的安装比较无趣。步骤也简单</p><p><img src="/contentimg/16/2/1.png" alt="Result pic 1" title="VM选择系统"></p><p><img src="/contentimg/16/2/2.png" alt="Result pic 1" title="选择CentOS系统"></p><p><img src="/contentimg/16/2/3.png" alt="Result pic 1" title="开始安装"></p><p><img src="/contentimg/16/2/4.png" alt="Result pic 1" title="磁盘检查"></p><p><img src="/contentimg/16/2/5.png" alt="Result pic 1" title="选择语言"></p><p><img src="/contentimg/16/2/6.png" alt="Result pic 1" title="设置"></p><p>　　这里得选择安装位置，才能下一步。</p><p><img src="/contentimg/16/2/7.png" alt="Result pic 1" title="设置密码"></p><p><img src="/contentimg/16/2/8.png" alt="Result pic 1" title="设置账户"></p><p><img src="/contentimg/16/2/9.png" alt="Result pic 1" title="完成安装"></p><p><img src="/contentimg/16/2/10.png" alt="Result pic 1" title="开始使用"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文记录如何在VM虚拟机中装Linux系统和Mac系统。全文截图解说，打开会比较慢。&lt;/p&gt;
    
    </summary>
    
      <category term="虚拟机" scheme="https://YaojiaxinPC.github.io/categories/%E8%99%9A%E6%8B%9F%E6%9C%BA/"/>
    
    
      <category term="VMWare" scheme="https://YaojiaxinPC.github.io/tags/VMWare/"/>
    
      <category term="Linux" scheme="https://YaojiaxinPC.github.io/tags/Linux/"/>
    
      <category term="Mac" scheme="https://YaojiaxinPC.github.io/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>可随身携带的windows系统</title>
    <link href="https://YaojiaxinPC.github.io/15SSDforwto/"/>
    <id>https://YaojiaxinPC.github.io/15SSDforwto/</id>
    <published>2018-10-18T16:03:59.000Z</published>
    <updated>2018-10-19T08:02:50.896Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文记录将SSD利用wto配置成可随身携带的系统。同时介绍一些SSD的知识。</p><a id="more"></a><p>　　开头贴一下百度百科。</p><p><a href="https://baike.baidu.com/item/Windows%20To%20Go/9911487?fr=aladdin" rel="external nofollow noopener noreferrer" target="_blank">Windows To Go</a></p><p>　　Windows To Go是Windows 8/8.1、Windows 10的一种企业功能，被内置于Windows 8企业版、Windows 8.1企业版、Windows 10企业版、教育版与专业版（1607以后）中。对于满足Windows 8硬件要求的电脑，Windows To Go可使Windows 8、Windows 8.1、Windows10从USB驱动器中启动并运行，不必考虑电脑上运行的操作系统（2012款之前的Mac和Windows RT不被支持）。</p><p>　　Windows To Go的设计并不旨在代替台式计算机、便携式计算机，或取代其他移动产品。恰恰相反，它为有效使用备用的工作场所方案资源提供有力支持。</p><hr><p>　　wto就是win8新版本开始提供的便携式系统，可以装在U盘上，然后随便找个主机插上去，就能登录这个系统进行使用。脱离了硬件上的捆绑。</p><p>　　个人建议最好弄成win10的，后面更新新版本那种。不过，按照我尝试后发现，首先得和你系统版本对应，并不是你去网上下载一个最新版就能使用的。我的win10是1703版本的，下载的包1803的就不能用，重启后进不了安装界面。</p><p>　　所以最好找你系统当时安装的那个包来做系统包。</p><p>　　启动wto的方式，在win菜单那里直接打“win”就会出来：</p><p><img src="/contentimg/15/1.png" alt="Result pic 1" title="启动wto"></p><p>　　当然也可以去控制面板找。</p><p><img src="/contentimg/15/2.png" alt="Result pic 2" title="wto界面"></p><p>　　下一步，选择iso。这里需要挂载一下iso，它才能识别到。不能直接定位到iso压缩包。</p><p><img src="/contentimg/15/3.png" alt="Result pic 3" title="wto搜索镜像"></p><p>　　安装过程很简单。这里不记录。重点是这个U盘安装了这个后，会隐藏起来，在现在使用的系统中就不会显式显示出来：</p><p><img src="/contentimg/15/4.png" alt="Result pic 4" title="U盘隐藏"></p><p>　　不过既然还是能识别到，就可以使用，直接右键给它分配一个盘符就可以使用了。利用这个特性，就可以跳过登陆验证，直接获取电脑上其他盘的文件了。</p><p>　　这个方式比用PE取消登陆密码要好。又不会破坏原系统的东西。适合用于电脑卡在更新界面无法登陆时，用U盘系统启动，然后分配给C盘盘符，进去把更新的文件删掉；然后回原系统启动，就不会更新了。具体步骤可以百度。以前是只能去F8安全模式弄，现在可以直接U盘启动弄了，容易很多。而且是和U盘速度挂钩的，如果用SSD，那就是秒开了，挂在那些老电脑上完全满分。</p><hr><p>　　下面介绍一下这个U盘的一些知识吧。我用的是SSD，所以特意查了下相关的东西。目前市面上，能达到直连效果的只有3.1的gen2。当然比较推荐圆头的那种typeC接口，就是手机上那种接口（注意，SSD还真能连在手机上用，驱动得起来）。</p><p>　　这里有个软件可以检测：</p><p><img src="/contentimg/15/5.png" alt="Result pic 5" title="U盘接口速度检测"></p><p><a href="https://www.aida64.com/" rel="external nofollow noopener noreferrer" target="_blank">aida</a> </p><p>　　注意这里电脑USB口的影响也有的，软件里面会提醒。当能达到3.1最高时，是能和直连那样达到几百兆的传输速度的。</p><p>　　这个软件，密钥搜一下很多，可以直接用。不用破解。</p><p>当然也有个检测磁盘评分的，不过觉得不太适合，那个是直连时检测4K对齐等等参数的：</p><p><img src="/contentimg/15/6.png" alt="Result pic 6" title="SSD速度检测"></p><p>　　对WTO还是蛮看好的。随身携带，电脑那么重，现在却只用带个U盘就行，省力很多。而且如果用的SSD，挂在老电脑上，完全就是脱胎换骨。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文记录将SSD利用wto配置成可随身携带的系统。同时介绍一些SSD的知识。&lt;/p&gt;
    
    </summary>
    
      <category term="windows系统妙用" scheme="https://YaojiaxinPC.github.io/categories/windows%E7%B3%BB%E7%BB%9F%E5%A6%99%E7%94%A8/"/>
    
    
      <category term="wto" scheme="https://YaojiaxinPC.github.io/tags/wto/"/>
    
      <category term="SSD" scheme="https://YaojiaxinPC.github.io/tags/SSD/"/>
    
  </entry>
  
  <entry>
    <title>编写bat自动备份博客到codingpage</title>
    <link href="https://YaojiaxinPC.github.io/14batforcodingpage/"/>
    <id>https://YaojiaxinPC.github.io/14batforcodingpage/</id>
    <published>2018-10-18T16:02:59.000Z</published>
    <updated>2018-10-20T11:43:56.539Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文记录编写bat自动同步博客到codingpage。</p><a id="more"></a><p>　　由于gitpage在国内访问没codingpage快，我是把域名挂在codingpage的。但是博客和代码等等都在github那边，平时靠两边复制文件来同步，操作繁琐，便想到了用批处理来做这件事。</p><p>　　在github这边，用gitbash生成，提交好后，点击bat，将public目录下的同步到coding。需求是这样的。那怎么实现？</p><h2 id="方案一"><a href="#方案一" class="headerlink" title="方案一"></a>方案一</h2><p>　　新建文件夹codingpage，将public的文件复制到那边，然后提交。这里有问题，需要先清空codingpage文件夹，然后才能复制。写了一下del的处理，发现好麻烦，考虑的东西太多了。</p><p>　　所以方案一放弃。</p><h2 id="方案二"><a href="#方案二" class="headerlink" title="方案二"></a>方案二</h2><p>　　还是新建文件夹codingpage，但是是用来init git，让它出来一个.git后缀的文件夹：</p><p><img src="/contentimg/14/1.png" alt="Result pic 1" title="初始化git文件夹"></p><p>　　后面的操作就是把这个.git文件夹复制过去public目录，然后cd进public，git提交。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">@<span class="built_in">echo</span> off</span><br><span class="line"><span class="built_in">echo</span> <span class="string">'use SSH command，will pull public to coding page'</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> publicdir=D:\<span class="built_in">source</span>\blogcode\public\.git</span><br><span class="line"><span class="built_in">set</span> publicd=D:\<span class="built_in">source</span>\blogcode\public</span><br><span class="line"><span class="built_in">set</span> aimdir=D:\<span class="built_in">source</span>\yaojiaxinpc\.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> aimdir is %aimdir%</span><br><span class="line"><span class="built_in">echo</span> publicdir is %publicdir%</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> d|xcopy %aimdir%\* %publicdir% /s /c /y</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> ***********************************************</span><br><span class="line"><span class="built_in">echo</span> ***********************************************</span><br><span class="line"><span class="built_in">echo</span> ***************start  to  commit***************</span><br><span class="line"><span class="built_in">echo</span> ***********************************************</span><br><span class="line"><span class="built_in">echo</span> ***********************************************</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /d %publicd%</span><br><span class="line"><span class="built_in">echo</span> gitdone</span><br><span class="line"></span><br><span class="line">del CNAME</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> git pull origin master</span><br><span class="line"><span class="built_in">echo</span> but this useless because it<span class="string">'s backups.so it won'</span>t <span class="keyword">done</span>.</span><br><span class="line"></span><br><span class="line">git add .</span><br><span class="line"><span class="built_in">echo</span> add all file to git...</span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> <span class="string">"year=%date:~0,4%"</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">"month=%date:~5,2%"</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">"day=%date:~8,2%"</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">"hour_ten=%time:~0,1%"</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">"hour_one=%time:~1,1%"</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">"minute=%time:~3,2%"</span></span><br><span class="line"><span class="built_in">set</span> <span class="string">"second=%time:~6,2%"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="string">"%hour_ten%"</span> == <span class="string">" "</span> (</span><br><span class="line">    <span class="built_in">set</span> cmitmessage=%year%%month%%day%0%hour_one%%minute%%second%</span><br><span class="line">) <span class="keyword">else</span> (</span><br><span class="line">    <span class="built_in">set</span> cmitmessage=%year%%month%%day%%hour_ten%%hour_one%%minute%%second%</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">git commit -m <span class="string">"%cmitmessage%"</span></span><br><span class="line"><span class="built_in">echo</span> use time <span class="keyword">for</span> message, commiting... </span><br><span class="line"></span><br><span class="line">git push origin master -f</span><br><span class="line"> </span><br><span class="line"><span class="built_in">echo</span> git push <span class="keyword">done</span>!</span><br><span class="line">pause&gt;nul</span><br></pre></td></tr></table></figure><p><a href="https://github.com/YaojiaxinPC/blogcode/blob/master/clonetocoding.bat" rel="external nofollow noopener noreferrer" target="_blank">对应git</a></p><p>　　该方案行得通，而且处理方式简单许多。下面记录一下过程中遇到的问题。</p><hr><p>　　按照脚本从上到下来记录吧。</p><p>　　首先是定义变量：</p><blockquote><p> set 变量</p></blockquote><p>　　引用</p><blockquote><p> %变量%</p></blockquote><p>　　然后是复制 xcopy，这里会遇到弹窗选择“文件”：“文件夹”的弹窗选择，所以手动加一下追加输入：</p><blockquote><p> d|XXXXX</p></blockquote><p>　　d是里面要输入的东西。</p><p>　　这样完成了将.git复制到public目录的工作了。得将运行目录定位到public目录。</p><blockquote><p> cd /d XXXX</p></blockquote><p>　　codingpage那边不需要CNAME文件，所以删掉它。</p><blockquote><p> del 文件</p></blockquote><p>　　剩下的是git操作。</p><p>　　先用cmd实验一下git操作：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git --version</span><br><span class="line">git config --list</span><br></pre></td></tr></table></figure><p><img src="/contentimg/14/2.png" alt="Result pic 1" title="检查cmd下能否运行git"></p><p><img src="/contentimg/14/3.png" alt="Result pic 1" title="cmd下的git"></p><p>　　①添加命令：“.”表示全部</p><blockquote><p> git add .</p></blockquote><p>　　②同步命令：</p><blockquote><p> git pull origin master</p></blockquote><p>　　③提交命令：（后面还得推送才是完整的提交）</p><blockquote><p> git commit -m ‘注释’</p></blockquote><p>　　④推送命令：</p><blockquote><p>  git push origin master</p></blockquote><p>　　这里我用的是主线，可以根据需要进行修改。</p><p>　　那就简单了，直接复制过去批处理。</p><p>　　这里遇到的问题蛮多的：</p><ol><li>批处理里面不能写多余的空格，特别是路径和变量定义。因为会完整识别出来空格并运用，导致出问题。</li><li>git commit不加注释，就强制进入VIM模式。所以得加。</li><li>单引号 和 双引号 的区别，刚开始一直报错当前文件夹没有可提交的东西，排查到是commit出错，后面排查出来是引号问题。</li></ol><p>　　这里搜到一篇比较完整的git批处理：<a href="http://blog.51cto.com/13717297/2136859" rel="external nofollow noopener noreferrer" target="_blank">bat文件方式对git进行操作</a> </p><p>　　以及面对VIM模式：<a href="https://www.cnblogs.com/macliu/p/6062917.html" rel="external nofollow noopener noreferrer" target="_blank">在git bush中如何退出vim编辑器</a> </p><p>还有运行该bat后，github desktop无法提交，提示：failed to receive handshake</p><p>　　其实只要注销重新登录就行的，不过我就去改配置文件，删掉用户信息，提交一遍，再加回去，就正常了。</p><p><img src="/contentimg/14/4.png" alt="Result pic 1" title="配置文件"></p><h2 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h2><p>　　后来发现，其实改配置文件，hexo d的时候能两边一起提交的！</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">deploy:</span></span><br><span class="line"><span class="function">  <span class="title">type</span>: <span class="title">git</span></span></span><br><span class="line"><span class="function">  <span class="title">message</span>: [<span class="title">message</span>]</span></span><br><span class="line"><span class="function">  <span class="title">repo</span>:</span></span><br><span class="line"><span class="function">    <span class="title">github</span>: &lt;<span class="title">repository</span> <span class="title">url</span>&gt;,[<span class="title">branch</span>]</span></span><br><span class="line"><span class="function">    <span class="title">gitcafe</span>: &lt;<span class="title">repository</span> <span class="title">url</span>&gt;,[<span class="title">branch</span>]</span></span><br></pre></td></tr></table></figure><p><img src="/contentimg/14/5.png" alt="Result pic 1" title="实际改主配置文件这里"></p><p><img src="/contentimg/14/6.png" alt="Result pic 1" title="官网有说明"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文记录编写bat自动同步博客到codingpage。&lt;/p&gt;
    
    </summary>
    
      <category term="批处理" scheme="https://YaojiaxinPC.github.io/categories/%E6%89%B9%E5%A4%84%E7%90%86/"/>
    
    
      <category term="批处理" scheme="https://YaojiaxinPC.github.io/tags/%E6%89%B9%E5%A4%84%E7%90%86/"/>
    
      <category term="git" scheme="https://YaojiaxinPC.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>修改蜘蛛网悬浮于顶层</title>
    <link href="https://YaojiaxinPC.github.io/13jsclickpass/"/>
    <id>https://YaojiaxinPC.github.io/13jsclickpass/</id>
    <published>2018-10-18T16:01:59.000Z</published>
    <updated>2018-10-18T09:01:38.675Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文记录我如何修改当前主题NexT中引用的canvas-nest的一些细节。</p><a id="more"></a><p>　　默认NexT主题，蜘蛛网是跟随鼠标运动的，但是我感觉那样不好玩，如果静置的话，会变成一个圈，不好看。然后我浏览了一下整个目录结构，找到</p><p><img src="/contentimg/13/1.png" alt="Result pic 1" title="引用目录结构"></p><p>　　看到有<a href="https://github.com/hustcc/canvas-nest.js" rel="external nofollow noopener noreferrer" target="_blank">canvas-nest</a> 还有<a href="http://fancybox.net/" rel="external nofollow noopener noreferrer" target="_blank">fancybox</a>  。</p><p>　　canvas-nest：蜘蛛网的实现js代码。</p><p>　　fancybox：淡入淡出功能模块。</p><p>　　于是我就想到把蜘蛛网的鼠标部分代码去掉。引入fancybox的淡入淡出动画，点击的时候出现“赞”的图标。</p><p>　　“赞”部分的代码如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(document).bind(&quot;click&quot;,function(e)&#123;var $i = $(&quot;&lt;a style=&apos;border:none;border-bottom:0px&apos;&gt;&quot;).prepend(&quot;&lt;img src=&apos;/images/redhand.png&apos;/&gt;&quot;);var x=e.pageX,y=e.pageY;$i.css(&#123;&quot;z-index&quot;:99999,  </span><br><span class="line"> &quot;top&quot;:y-15,&quot;left&quot;:x,&quot;position&quot;:&quot;absolute&quot;,&quot;color&quot;:&quot;red&quot;&#125;);$(&quot;body&quot;).append($i);$i.animate(&#123;&quot;top&quot;:y-180,&quot;opacity&quot;:0&#125;,1500,function()&#123;$i.remove();&#125;);e.stopPropagation();&#125;);</span><br></pre></td></tr></table></figure><p>　　然后又想到把蜘蛛网放到顶层</p><blockquote><p> zIndex=99</p></blockquote><p>　　结果发现这时候鼠标不能选中代码和文字进行复制了。推测是canvas层挡住了，所以得给它设置穿透：</p><blockquote><p> pointer-events:none;</p></blockquote><p><a href="http://www.css88.com/book/css/properties/user-interface/pointer-events.htm" rel="external nofollow noopener noreferrer" target="_blank">pointer-events</a></p><p><img src="/contentimg/13/2.png" alt="Result pic 2" title="pointer-events"></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文记录我如何修改当前主题NexT中引用的canvas-nest的一些细节。&lt;/p&gt;
    
    </summary>
    
      <category term="前端" scheme="https://YaojiaxinPC.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="https://YaojiaxinPC.github.io/tags/js/"/>
    
      <category term="canvas-nest" scheme="https://YaojiaxinPC.github.io/tags/canvas-nest/"/>
    
  </entry>
  
  <entry>
    <title>Markdown内嵌html文件</title>
    <link href="https://YaojiaxinPC.github.io/12hottoaddhtml/"/>
    <id>https://YaojiaxinPC.github.io/12hottoaddhtml/</id>
    <published>2018-10-18T15:59:58.000Z</published>
    <updated>2018-10-18T07:34:33.160Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文记录如何在Markdown内嵌html文件，并设置hexo忽略编译该html。</p><a id="more"></a><p>　　前面一篇博客，我在页面里面嵌入了一个时钟html文件。</p><p>　　到底如何实现的呢？</p><p>　　刚开始，我是直接引用下面这样的代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;p&gt;</span><br><span class="line">    &lt;div style=&quot;width:100%; height:350px;border:none;text-align:center&quot;&gt;</span><br><span class="line">&lt;iframe allowtransparency=&quot;yes&quot; frameborder=&quot;0&quot; width=&quot;300&quot; height=&quot;300&quot; src=&quot;/contentimg/11/click.html&quot;/&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/p&gt;</span><br></pre></td></tr></table></figure><p><img src="/contentimg/12/1.png" alt="Result pic 1" title="直接嵌入iframe"></p><p>　　Markdown可以插入外部html：利用iframe标签来实现。</p><p>　　实际上，这样还是不行，hexo会自动给该html添加框架的代码，导致实际的效果变成主页嵌套该html代码。</p><p><img src="/contentimg/12/2.png" alt="Result pic 2" title="主页嵌套html"></p><p>　　刚开始没头绪，后面对比文件大小。</p><p><img src="/contentimg/12/3.png" alt="Result pic 3" title="生成public文件比对"></p><p>　　打开看到是加入了框架的代码导致。所以这时候要解决的是怎样让hexo编译的时候忽略该文件不加入框架代码。</p><p>　　还好hexo也考虑到这个问题：</p><p><img src="/contentimg/12/4.png" alt="Result pic 4" title="属性skip_render"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">skip_render: </span><br><span class="line"> - contentimg/<span class="number">11</span>/click.html</span><br><span class="line"> - <span class="number">404</span>/<span class="number">404</span>.html</span><br><span class="line"> - README.md</span><br></pre></td></tr></table></figure><p>　　在这里添加需要忽略编译的文件或文件夹。包括README.md也能这样弄，就不用像我前面的优化博客中提到那样在gulp里面操作复制文件了。</p><p>　　文件夹的话是/*。注意设置完后，需要hexo clean，再hexo g。才能看到效果。不然直接hexo g，是不起效的。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文记录如何在Markdown内嵌html文件，并设置hexo忽略编译该html。&lt;/p&gt;
    
    </summary>
    
      <category term="前端" scheme="https://YaojiaxinPC.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="https://YaojiaxinPC.github.io/tags/js/"/>
    
      <category term="skip_render" scheme="https://YaojiaxinPC.github.io/tags/skip-render/"/>
    
      <category term="Markdown内嵌html" scheme="https://YaojiaxinPC.github.io/tags/Markdown%E5%86%85%E5%B5%8Chtml/"/>
    
  </entry>
  
  <entry>
    <title>Markdown内嵌前端代码实例--时钟挂件</title>
    <link href="https://YaojiaxinPC.github.io/11clock-js/"/>
    <id>https://YaojiaxinPC.github.io/11clock-js/</id>
    <published>2018-10-18T15:58:58.000Z</published>
    <updated>2018-10-18T07:38:05.225Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文分享一个时钟挂件实例。该部分代码是网上搜索复制来的，非本人版权，请勿用于商业用途。</p><a id="more"></a>  <p><div style="width:100%; height:350px;border:none;text-align:center"><iframe allowtransparency="yes" frameborder="0" width="300" height="300" src="/contentimg/11/click.html"></iframe></div></p><p>　　这里利用iframe引用外部html，同时设置</p><blockquote><p>allowtransparency=”yes” frameborder=”0”</p></blockquote><p>　　让iframe的背景透明，边框消失。</p><blockquote><p>div style=”width:100%; height:350px;border:none;text-align:center”</p></blockquote><p>　　但是此时的iframe是靠左上的。我想居中，就需要利用div来实现。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文分享一个时钟挂件实例。该部分代码是网上搜索复制来的，非本人版权，请勿用于商业用途。&lt;/p&gt;
    
    </summary>
    
      <category term="前端" scheme="https://YaojiaxinPC.github.io/categories/%E5%89%8D%E7%AB%AF/"/>
    
    
      <category term="js" scheme="https://YaojiaxinPC.github.io/tags/js/"/>
    
      <category term="时钟挂件" scheme="https://YaojiaxinPC.github.io/tags/%E6%97%B6%E9%92%9F%E6%8C%82%E4%BB%B6/"/>
    
      <category term="Markdown内嵌前端代码" scheme="https://YaojiaxinPC.github.io/tags/Markdown%E5%86%85%E5%B5%8C%E5%89%8D%E7%AB%AF%E4%BB%A3%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>ffmpeg-简单AES加解密记录</title>
    <link href="https://YaojiaxinPC.github.io/10ffmpeg-aes-1/"/>
    <id>https://YaojiaxinPC.github.io/10ffmpeg-aes-1/</id>
    <published>2018-10-18T15:57:58.000Z</published>
    <updated>2018-10-18T08:21:39.014Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文记录如何将浏览器中的视频缓存文件合并成一个mp4文件。该方式使用ffmpeg。视频片段为m3u8格式。</p><a id="more"></a><hr><p>　　视频分段缓存技术之中的一种格式m3u8，据说是苹果开发的。而这里由于有ffmpeg工具，运用起来很快捷，当然也可以自己写代码集成一个播放器。本文暂时只记录简单的运用ffmpeg工具加解密和播放。代码集成等后面有空再分享。</p><p>观摩这项技术时参考的几篇文章分享如下：</p><p><a href="https://blog.csdn.net/psh18513234633/article/details/79312607" rel="external nofollow noopener noreferrer" target="_blank">使用ffmpeg转码m3u8并播放</a></p><p><a href="https://blog.csdn.net/weiyuefei/article/details/70257616" rel="external nofollow noopener noreferrer" target="_blank">hls协议（最清晰的讲解）</a></p><p><a href="https://blog.csdn.net/newarow/article/details/82805672" rel="external nofollow noopener noreferrer" target="_blank">流媒体开发之–HLS–M3U8解析(2): HLS草案</a></p><p><a href="https://gist.github.com/larvata/95df619df7109d8b74d2b965a3266354#file-ffmpeg-cheatsheet-md" rel="external nofollow noopener noreferrer" target="_blank">ffmpeg Cheatsheet</a></p><p><a href="https://www.cnblogs.com/codeAB/p/9184266.html" rel="external nofollow noopener noreferrer" target="_blank">使用ffmpeg视频切片并加密</a></p><p><a href="https://blog.csdn.net/cnhome/article/details/73250495" rel="external nofollow noopener noreferrer" target="_blank">ffmpeg分解视频文件并加密</a></p><p><a href="https://blog.csdn.net/xuyankuanrong/article/details/77529468" rel="external nofollow noopener noreferrer" target="_blank">FFmpeg之ffplay命令使用</a></p><p>还有一些cmd操作：</p><p><a href="https://blog.csdn.net/xhhjin/article/details/7373524" rel="external nofollow noopener noreferrer" target="_blank">CMD批处理循环，太强大了</a></p><p><a href="http://www.360doc.com/content/14/0212/22/9849466_352039289.shtml" rel="external nofollow noopener noreferrer" target="_blank">copy /b 命令无缝合并多个文件</a></p><p>　　当然还有其他很多参考过的网页，但是都很散，有用信息不多，暂不分享那些网页。</p><p>　　这项技术运用在很多浏览器上，所以想找东西练手，还是蛮多的（某些想下载但是没提示下载的视频，实际上是放在缓存文件夹里面，然后本地加载拼起来的）。</p><p>这里我就简单分享一下如何自己用ffmepg对一个视频加密，以及解密该视频。</p><p>目前我接触到3种情况：</p><ol><li><p>未加密的视频，用PotPlayer可以直接打开观看；</p></li><li><p>有AES的key，没IV（其实就是使用了默认值），部分有两个m3u8；</p></li><li><p>有AES的key和IV，就是下面将要分享的操作。</p></li></ol><p>　　目前要使用的工具，首先必须要有<a href="https://www.ffmpeg.org/download.html" rel="external nofollow noopener noreferrer" target="_blank">ffmepg</a> ，下载成已经Build好的包，不然自己来生成比较麻烦，当然，有兴趣可以下载代码来看，是开源的。</p><p><img src="/contentimg/10/1.png" alt="Result pic 1" title="下载ffmpeg"> </p><p>　　生成key部分我使用了<a href="http://gnuwin32.sourceforge.net/packages/openssl.htm" rel="external nofollow noopener noreferrer" target="_blank">Openssl</a>  ，功能超级多，但是本文只用到简单的生成随机密码。好像是我下载不对，操作发现不支持hex，所以后面生成hex部分得写一下代码处理，当然也有网页生成，数据库生成，这里就不写明了。</p><p><img src="/contentimg/10/2.png" alt="Result pic 2" title="下载openssl"> </p><p>　　然后就是准备一个视频。我这次下载了这些东西：</p><p><img src="/contentimg/10/3.png" alt="Result pic 3" title="全部所需东西"> </p><p>　　接下来就开始动手：（实际不用Openssl也行，直接手动写几个编码当密码就行）</p><p><img src="/contentimg/10/4.png" alt="Result pic 4" title="缓存目录结构"></p><p>　　通过上面推荐的链接，大家应该知道是主要m3u8文件，然后附带的ts文件（可以不写后缀，就是些视频片段，可以在播放器中打开观看），key（会改变视频片段的编码，导致无法播放）。</p><p>　　这里的m3u8可以用播放器打开，正常是会报错的，因为视频片段被AES加密了编码模式，所以普通读取出来不是正常的头，就报错了。</p><p><img src="/contentimg/10/5.png" alt="Result pic 5" title="无法打开加密文件"></p><p>　　如果你遇到的m3u8没有加密，那这里是打开可以播放的。上面那些ts也是可以直接播放器打开的。</p><p>　　一般情况下，m3u8文件可能需要进行修改。就是当你操作的是手机端，把缓存搞在电脑上转码时（或者从C盘缓存目录拷贝出来时），里面的路径是不对的，里面记录的是绝对路径，需要修改。像下面图片，手机拷过来后是手机上的绝对路径，用记事本ctrl + H，该成电脑上的当前路径后就能用了（或者删掉变成相对路径）。</p><p><img src="/contentimg/10/6.png" alt="Result pic 6" title="修改路径"></p><p>现在从头开始做吧。</p><p>　　目前我们手上只有一个test.mp4，先介绍不加密的方式分段生成m3u8。</p><h2 id="无加密方式生成m3u8"><a href="#无加密方式生成m3u8" class="headerlink" title="无加密方式生成m3u8"></a>无加密方式生成m3u8</h2><p>　　新建一个文件夹来放置后面要生成的ts文件。</p><p>　　先用管理员身份运行cmd：</p><p>　　cd到ffmpeg.exe所在的地方（不过我推荐是cd到要生成文件的地方，然后ffmpeg.exe弄成全路径来执行，效率会高一些）。</p><p>　　例如我test.mp4在D:\aa\bb目录下：</p><p>　　这样我在cmd中输入：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg.exe -y -i D:\aa\bb\test.mp4 -hls_time <span class="number">6</span> -hls_playlist_type vod -hls_segment_filename "D:\aa\bb\file%d" D:\aa\bb\playlist.m3u8</span><br></pre></td></tr></table></figure><p>　　-hls_time  是每一段视频多长时间</p><p>　　-hls_segment_filename   分段生成在哪里，命名规则%d</p><p>　　以及结尾的m3u8输出路径</p><p><img src="/contentimg/10/7.png" alt="Result pic 7" title="处理无加密方式片段"></p><p>　　目录下已经生成分段文件+m3u8文件了，由于这里没有加密，所以分段文件可以用播放器直接打开。当然也可以直接打开m3u8文件。</p><p><img src="/contentimg/10/8.png" alt="Result pic 8" title="无加密playlist.m3u8"></p><p>这里插播一下ffplay的使用：</p><p><img src="/contentimg/10/9.png" alt="Result pic 9" title="使用ffplay播放视频"></p><p>　　指令中要注意的就是路径，从前面我们知道是m3u8中记录是用相对路径，所以需要把cmd移到该目录下，然后用ffplay的全路径 + -allowed_extensions ALL （就是允许全部后缀模式，否则没后缀的不让播放） +m3u8 + 回车</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">aa</span>\<span class="title">ffmpeg</span>-4.0.2-<span class="title">win64</span>-<span class="title">static</span>\<span class="title">bin</span>\<span class="title">ffplay.exe</span> -<span class="title">allowed_extensions</span> <span class="title">ALL</span> <span class="title">playlist.m3u8</span></span></span><br></pre></td></tr></table></figure><p>　　既然提到分段，那就有合并了。</p><p>　　由于这里没有使用加密，所以可以直接把全部ts文件合并成一个文件就行。</p><p>　　可以cmd直接合并，但是需要提前处理命名规则，因为cmd按字符比较的，01和1是两种不同的概念，这里可以写个循环处理改命名，然后再用cmd的copy /b * new.mp4。</p><p>　　cmd代码不好写。所以推荐还是用ffmpeg。</p><p>代码如下：合并并转码成mp4格式<br><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">aa</span>\<span class="title">ffmpeg</span>-4.0.2-<span class="title">win64</span>-<span class="title">static</span>\<span class="title">bin</span>\<span class="title">ffmpeg.exe</span> -<span class="title">allowed_extensions</span> <span class="title">ALL</span> -<span class="title">i</span> <span class="title">playlist.m3u8</span> -<span class="title">acodec</span> <span class="title">copy</span> -<span class="title">vcodec</span> <span class="title">copy</span> -<span class="title">f</span> <span class="title">mp4</span> <span class="title">output.mp4</span></span></span><br></pre></td></tr></table></figure></p><p><img src="/contentimg/10/10.png" alt="Result pic 10" title="合并并转码成mp4格式"></p><h2 id="加密方式生成m3u8"><a href="#加密方式生成m3u8" class="headerlink" title="加密方式生成m3u8"></a>加密方式生成m3u8</h2><p>　　有了前面那些截图，这里的操作其实就是多了写密码步骤而已，其他大部分一样，所以这里就不再截图了。</p><p>　　加密，目前我看的是AES。概念那些大家有空去了解一下，这里只分享一下怎么用。</p><p>具体步骤是：<a href="https://www.cnblogs.com/codeAB/p/9184266.html" rel="external nofollow noopener noreferrer" target="_blank">使用ffmpeg视频切片并加密</a>  </p><p>　　然后里面一些参数，其实在源文件里面已经有了，可以找这些文档来弄明白设置什么参数：</p><p><img src="/contentimg/10/11.png" alt="Result pic 11" title="源文件说明文档"></p><p>　　这里我多分享一下直接用一个key来加密怎么操作吧。就是手上有一个密码+一个视频，弄到最后是一个放密码的文本文件，然后就是ts+m3u8，没有IV。</p><p>　　其实就是前面步骤中，enc.keyinfo中第三行的IV删掉就行。</p><p>　　同时步骤一中用openssl生成key的，改成：新建文本文件，写入密码后保存，然后删掉后缀当key。</p><p>其他照旧：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">D:\<span class="title">aa</span>\<span class="title">ffmpeg</span>-4.0.2-<span class="title">win64</span>-<span class="title">static</span>\<span class="title">bin</span>\<span class="title">ffmpeg.exe</span> -<span class="title">y</span> -<span class="title">i</span> <span class="title">test.mp4</span> -<span class="title">hls_time</span> 6 -<span class="title">hls_key_info_file</span> <span class="title">k0.keyinfo</span> -<span class="title">hls_playlist_type</span> <span class="title">vod</span> -<span class="title">hls_segment_filename</span> "<span class="title">file</span>%<span class="title">d</span>" <span class="title">playlist.m3u8</span></span></span><br></pre></td></tr></table></figure><p><img src="/contentimg/10/12.png" alt="Result pic 12" title="加密方式m3u8文件"></p><p>　　密码文件k0，用openssl生成的话，打开是乱码的，自己写入的就不会乱码，使用起来暂时未发现区别：</p><p><img src="/contentimg/10/13.png" alt="Result pic 13" title="密码文件"></p><p>　　加密方式生成的ts文件，你会发现无法用播放器打开，只能用ffplay打开（打开方式同无加密一样的代码，都是直接传入m3u8文件即可）。</p><p>　　这样解密方式，实际也和前面一样，都是围绕m3u8，是否有key，实际都是内部处理的。</p><p>这里可能会遇到问题的是，网上的都是说EXT-X-KEY这里的是http，实际都可以，找得到文件就行。然后就是开头提的两个m3u8的，这个就溜一点：</p><p>　　改EXT-X-KEY的文件地址为key的本地地址后，发现这样去转是失败的（提示找不到ts文件），这时可以把下面的一堆ts信息，换成另一个m3u8里面的ts信息，就可以转换了。我遇到的情况，是第一个ts信息是本地文件，第二个是一个找不到的路径的文件（但是这个带key，第一个不带），修改成本地文件后，除了#EXTINF的数字不同外，其他都一样（文件也能找到了），结果还是报错，就把那个m3u8的ts信息都复制过来（#EXTINF的数字保持一样），本个m3u8只保留EXT-X-KEY这里的URI=”k0”，其他都是用另一个m3u8的，就可以转换了。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文记录如何将浏览器中的视频缓存文件合并成一个mp4文件。该方式使用ffmpeg。视频片段为m3u8格式。&lt;/p&gt;
    
    </summary>
    
      <category term="编程人生" scheme="https://YaojiaxinPC.github.io/categories/%E7%BC%96%E7%A8%8B%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="视频处理" scheme="https://YaojiaxinPC.github.io/tags/%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86/"/>
    
      <category term="工具使用" scheme="https://YaojiaxinPC.github.io/tags/%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8/"/>
    
      <category term="ffmpeg" scheme="https://YaojiaxinPC.github.io/tags/ffmpeg/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客心得---配置主题Next</title>
    <link href="https://YaojiaxinPC.github.io/9howtoeditthemes/"/>
    <id>https://YaojiaxinPC.github.io/9howtoeditthemes/</id>
    <published>2018-10-18T15:55:58.000Z</published>
    <updated>2018-10-21T06:38:13.970Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文是记录如何修改配置Next，增加百度统计功能、评论区、RSS、爬虫等模块。是在前面几篇文章的扩展记录。</p><p>　　注意这些第三方插件，当我们的博客布在github和coding两边时，数据是可以共用的！只要id和key是同样，在服务供应商那边记录域名和网站后，就可以顺利共用数据。</p><a id="more"></a><p>　　<br><a href="http://theme-next.iissnan.com/getting-started.html#avatar-setting" rel="external nofollow noopener noreferrer" target="_blank"><strong><em>Next的使用说明</em></strong></a></p><p>　　开头先贴官方配置说明。这里的头像位置、昵称等等，请通过这个官方配置说明链接来配置。本文只分享官方文档里面难的部分，以及文档里面没有的部分。记住配置文件“：”后面需要打空格，然后才加内容！</p><p>　　注意，打开这些第三方服务，会拖慢网站打开速度，请酌情使用。</p><p>　　<a href="http://theme-next.iissnan.com/third-party-services.html#algolia-search" rel="external nofollow noopener noreferrer" target="_blank">官方指导链接</a> </p><h2 id="评论系统-amp-文章阅读量统计功能"><a href="#评论系统-amp-文章阅读量统计功能" class="headerlink" title="评论系统&amp;文章阅读量统计功能"></a>评论系统&amp;文章阅读量统计功能</h2><p>　　因为文章访问数量那个系统我用的<a href="https://leancloud.cn/" rel="external nofollow noopener noreferrer" target="_blank">leancloud</a>  ，发现配置文件里面刚好也支持它，我就也用的这个服务。</p><p>　　官方文档里面有提到这个阅读理解统计的：</p><p><a href="https://notes.doublemine.me/2015-10-21-为NexT主题添加文章阅读量统计功能.html#%E9%85%8D%E7%BD%AELeanCloud" rel="external nofollow noopener noreferrer" target="_blank">为NexT主题添加文章阅读量统计功能</a>  </p><p>　　一起凑合着看吧。由于它支持我们改数据，所以我就使用它了。（没事可以偷偷上去改个阅读量999999！）</p><p><img src="/contentimg/9/8.png" alt="Result pic 1" title="创建应用"></p><p><img src="/contentimg/9/9.png" alt="Result pic 1" title="官方教程"></p><p><img src="/contentimg/9/10.png" alt="Result pic 1" title="Counter以及Comment"></p><p>　　注意，第一次创建应用，在这里添加class，需要等2分钟，所以要耐心等。另外，免费版的，不能删除class，所以别加太多了。注意这里：评论的是Comment，文章阅读量的是Counter。</p><p>　　然后就是去获取key和id。这里不能直接鼠标拉选，不过可以右键，定位到元素，然后在代码里面找到这个字符串，就能复制了。</p><p><img src="/contentimg/9/13.png" alt="Result pic 1" title="获取key和id"></p><p><img src="/contentimg/9/14.png" alt="Result pic 1" title="修改配置文件valine"></p><p><img src="/contentimg/9/15.png" alt="Result pic 1" title="修改配置文件leancloud_visitors"></p><p>　　最后，千万记得要去“安全中心”设置“web安全域名”！因为这个id和key是明文，谁都能抓取到的！</p><p><img src="/contentimg/9/16.png" alt="Result pic 1" title="接口屏蔽非安全域名的调用，这会造成网页加载超级慢"></p><p>　　还可以设置邮件提醒<a href="https://github.com/xCss/Valine/wiki/Valine-评论系统中的邮件提醒设置" rel="external nofollow noopener noreferrer" target="_blank">Valine 评论系统中的邮件提醒设置</a> </p><h2 id="百度统计"><a href="#百度统计" class="headerlink" title="百度统计"></a><a href="http://tongji.baidu.com/" rel="external nofollow noopener noreferrer" target="_blank">百度统计</a></h2><p>　　文档里面说得很简略，下面我就介绍一下详细的过程。</p><p><img src="/contentimg/9/1.png" alt="Result pic 1" title="百度统计"></p><p>　　怎么打开？</p><p><img src="/contentimg/9/3.png" alt="Result pic 1" title="指导文档说明情况"></p><p><img src="/contentimg/9/2.png" alt="Result pic 1" title="在这里"></p><p><img src="/contentimg/9/4.png" alt="Result pic 1" title="在配置文件这里"></p><p>　　先在百度统计那边复制key，然后到配置文件里面ctrl f找到baidu_analytics 字段，打一个空格后把key复制进去。hexo clean，再生成，让html重新编译，会自动加代码进去的。</p><p><img src="/contentimg/9/6.png" alt="Result pic 1" title="F12查看代码"></p><p>　　如果不会，可以直接发布。然后到百度统计那边检查。</p><p><img src="/contentimg/9/5.png" alt="Result pic 1" title="百度统计自检查"></p><h2 id="内容分享服务"><a href="#内容分享服务" class="headerlink" title="内容分享服务"></a>内容分享服务</h2><p><img src="/contentimg/9/7.png" alt="Result pic 1" title="不支持https"></p><p>　　第一个JiaThis，搜索有新闻说已经关闭分享服务了。第三个好像是国外，搞推特的，国内访问应该比较慢，也不考虑。后面找了Mob，但是不支持https，所以也用不了。</p><p>　　剩下一个百度，结果，打开后发现很丑，还只能分享图片，不能整篇文章分享（得改代码）。所以我就没开该项。请自取哈。</p><p><img src="/contentimg/9/31.png" alt="Result pic 1" title="取消注释该两项即可"></p><p><img src="/contentimg/9/30.png" alt="Result pic 1" title="百度分析效果"></p><p>　　分享的效果也不好，点击后调整的界面不好看。</p><h2 id="字数统计-amp-阅读时长"><a href="#字数统计-amp-阅读时长" class="headerlink" title="字数统计&amp;阅读时长"></a><a href="https://www.cnblogs.com/php-linux/p/8418518.html" rel="external nofollow noopener noreferrer" target="_blank">字数统计&amp;阅读时长</a></h2><p><img src="/contentimg/9/17.png" alt="Result pic 1" title="配置文件post_wordcount"></p><p>　　里面已经内置了，开启就能使用了。但是单纯改配置文件，数字是显示不出来的，得添加插件：</p><blockquote><p> npm install hexo-wordcount –save -dev</p></blockquote><p>　　安装完成后，hexo clean；hexo g。启动服务就能看到效果了。如果想像我这边一样加文字：</p><p>　　到目录：/themes/next/layout/_macro/post.swig</p><p>　　用记事本打开后搜索post_wordcount：</p><p><img src="/contentimg/9/18.png" alt="Result pic 1" title="添加字和分钟"><br>　　<br><img src="/contentimg/9/19.png" alt="Result pic 1" title="效果"></p><h2 id="RSS"><a href="#RSS" class="headerlink" title="RSS"></a><a href="https://www.jianshu.com/p/a79422ab2013" rel="external nofollow noopener noreferrer" target="_blank">RSS</a></h2><blockquote><p> npm install hexo-generator-feed –save -dev</p></blockquote><p>　　然后到主配置文件最底下添加：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Extensions</span><br><span class="line"><span class="function">plugins:</span></span><br><span class="line"><span class="function">    <span class="title">hexo</span>-<span class="title">generator</span>-<span class="title">feed</span></span></span><br><span class="line"><span class="function">#<span class="title">Feed</span> <span class="title">Atom</span></span></span><br><span class="line"><span class="function"><span class="title">feed</span>:</span></span><br><span class="line"><span class="function">    <span class="title">type</span>: <span class="title">atom</span></span></span><br><span class="line"><span class="function">    <span class="title">path</span>: <span class="title">atom.xml</span></span></span><br><span class="line"><span class="function">    <span class="title">limit</span>: 20</span></span><br></pre></td></tr></table></figure><p><img src="/contentimg/9/20.png" alt="Result pic 1" title="添加RSS生成配置"></p><p>　　这个插件的作用是统计记录你的文章，生成一个xml格式的文件atom.xml。别人通过订阅分析你这个文件变动来了解你文章的更新情况。</p><p><img src="/contentimg/9/22.png" alt="Result pic 1" title="简书上博主分享的操作"></p><h2 id="百度sitemap"><a href="#百度sitemap" class="headerlink" title="百度sitemap"></a><a href="https://blog.csdn.net/heqiangflytosky/article/details/54863166" rel="external nofollow noopener noreferrer" target="_blank">百度sitemap</a></h2><blockquote><p> npm install hexo-generator-baidu-sitemap –save -dev</p></blockquote><p><img src="/contentimg/9/23.png" alt="Result pic 1" title="百度sitemap情况"></p><p>　　在百度里面搜索site:域名。检验是否被百度收录。如果没有的，需要进行登记。这里google的操作比较简单。</p><p>　　百度的，由于被github屏蔽爬虫，所以只能考虑放coding上面。coding的免费玩家，是会强制301转址的，所以这时候放百度验证，是无法成功的，百度验证不会像浏览器那样跳转识别，在说明那里也提到：“如果存在转址，请暂时取消”。</p><p><img src="/contentimg/9/24.png" alt="Result pic 1" title="coding要求"></p><p>　　那怎么玩？只能想办法完成这个coding要求了。加图标的话，布局上没想到怎么改。所以我选择加文字版：</p><p><img src="/contentimg/9/25.png" alt="Result pic 1" title="coding要求文字版"></p><p><img src="/contentimg/9/26.png" alt="Result pic 1" title="coding要求文字版效果"></p><p>　　刚开始还去翻代码，结果发现原来NexT考虑到这个问题了，直接给我们加在配置文件里面，只需要去设置这个属性就行，不用改代码。</p><p><img src="/contentimg/9/27.png" alt="Result pic 1" title="修改配置文件位置"></p><p>　　这里会遇到一个问题，当你把coding那边那个代码复制过来时，hexo g会报错！原来是由于没换行的概念，hexo读配置属性，是根据“：+空格”来判断的，所以只需要把那个空格删掉，它就不识别成属性，就不会报错。</p><p>　　接下来就是等通过验证然后来搞百度收录了。</p><p><a href="http://zhanzhang.baidu.com/linksubmit/url" rel="external nofollow noopener noreferrer" target="_blank">百度收录链接</a> </p><p>　　收录前需要进行的<a href="http://zhanzhang.baidu.com/site/siteadd" rel="external nofollow noopener noreferrer" target="_blank">验证网站所有权</a>  。就是上面提到的验证。</p><p>　　这里有三种方式可以做到：挂文件/在html加代码/CNAME。推荐第一种，因为第二种就直接明文了。当然，最后我还是用了第三种，CNAME，只需要去dns服务商那边设置就行了，马上就生效了，不用等coding过检。</p><h3 id="挂文件"><a href="#挂文件" class="headerlink" title="挂文件"></a>挂文件</h3><p>　　就是把密码文件下载下来后，放在source根目录，然后到主配置文件找skip_render属性：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">skip_render: </span><br><span class="line"> - baidu_verify_XXXXXX.html</span><br></pre></td></tr></table></figure><p>　　防止hexo添加代码到该密码文件，百度爬虫才能识别到该文件。</p><h3 id="加代码"><a href="#加代码" class="headerlink" title="加代码"></a>加代码</h3><p>　　找到文件\themes\next\layout_partials\head.swig。然后直接在这里的空白处插入代码。</p><p><img src="/contentimg/9/28.png" alt="Result pic 1" title="在head插入代码"></p><p>　　百度统计那边功能蛮多的，不过现在博客暂时还没收录，等收录后体验下其他的功能。</p><p>　　在配置好后，到配置文件启用：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">baidusitemap:</span></span><br><span class="line"><span class="function">  <span class="title">path</span>: <span class="title">baidusitemap.xml</span></span></span><br></pre></td></tr></table></figure><p>　　再到百度提交收录：</p><p><img src="/contentimg/9/46.png" alt="Result pic 1" title="提交百度收录"></p><p>　　建议开启百度自动推送，就sitemap左边那个。代码已经集成在Next了，只要开启主题配置文件的属性“baidu_push”：</p><p><img src="/contentimg/9/50.png" alt="Result pic 1" title="百度自动推送"></p><h2 id="Google收录"><a href="#Google收录" class="headerlink" title="Google收录"></a>Google收录</h2><blockquote><p> npm install hexo-generator-sitemap –save -dev</p></blockquote><p>　　开vpn，<a href="https://www.google.com/webmasters/tools/home?hl=zh-CN" rel="external nofollow noopener noreferrer" target="_blank">Google站长工具</a>  类似百度收录的操作，都是下载密码html文件，放在根目录，然后到主配置文件添加忽略编译属性。</p><p>　　好处是github没有屏蔽google，所以直接用github那边的挂谷歌。而且他们都是国外的，所以挂github的话，比挂国内的coding对搜索排名要有利。</p><p><img src="/contentimg/9/29.png" alt="Result pic 1" title="马上过检"></p><p>　　在配置好后，到配置文件启用：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#sitemap</span><br><span class="line"><span class="function">sitemap:</span></span><br><span class="line"><span class="function">  <span class="title">path</span>: <span class="title">sitemap.xml</span></span></span><br></pre></td></tr></table></figure><p>　　同样要去提交收录。但是超级快，一下就能在谷歌搜索到了。</p><h2 id="其他第三方服务"><a href="#其他第三方服务" class="headerlink" title="其他第三方服务"></a>其他第三方服务</h2><p><img src="/contentimg/9/32.png" alt="Result pic 1" title="目标目录"></p><p>　　到该目录下，列了目前NexT集成的第三方服务，可以根据文件名来选择要不要开启，都是在配置文件里面能找到开启选项的。其实这里的作用，就是把全部js脚本放在这里，然后用一个配置文件属性，判断要不要加这个脚本到html里面。</p><h2 id="其他优化"><a href="#其他优化" class="headerlink" title="其他优化"></a>其他优化</h2><p>　　第三方的东西我目前只加了这些，其他就是代码上的修改了。</p><h3 id="文章末尾添加“—end—”"><a href="#文章末尾添加“—end—”" class="headerlink" title="文章末尾添加“—end—”"></a>文章末尾添加“—end—”</h3><p>　　打开themes\next\layout_macro\post.swig，找到“wechat_subscriber”的地方，这个就是文章结尾时，“请加我好友”的图标所在的地方。复制如下代码：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   &#123;% if not is_index %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"text-align:center;color: #ccc;font-size:20px;"</span>&gt;</span>-------------------------------------------------------- The End --------------------------------------------------------<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>　　这里文字大小和长度，请根据自己喜好进行修改。</p><p>　　或者是使用hr写法。注意这里<a href="https://blog.csdn.net/lunhui1994_/article/details/79085805" rel="external nofollow noopener noreferrer" target="_blank">文本文字在DIV中垂直水平居中显示</a>  </p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">   &#123;% if not is_index %&#125;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"height:85px;line-height:85px;text-align:center;color:#ccc;font-size:20px"</span>&gt;</span><span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">"7"</span> <span class="attr">color</span>=<span class="string">"coral"</span> <span class="attr">style</span>=<span class="string">"vertical-align:middle;float:left"</span> <span class="attr">width</span>=<span class="string">"40%"</span>&gt;</span> The End <span class="tag">&lt;<span class="name">hr</span> <span class="attr">size</span>=<span class="string">"7"</span> <span class="attr">color</span>=<span class="string">"coral"</span> <span class="attr">style</span>=<span class="string">"vertical-align:middle;float:right"</span> <span class="attr">width</span>=<span class="string">"40%"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span> <span class="attr">style</span>=<span class="string">"clear:both"</span>/&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p>　　但在手机端效果不行，换行了。</p><h3 id="取消打赏的文字摇晃"><a href="#取消打赏的文字摇晃" class="headerlink" title="取消打赏的文字摇晃"></a>取消打赏的文字摇晃</h3><p>　　自带的摇晃太魔性了，建议去掉。到位置：next/source/css/_common/components/post/post-reward.styl ，搜“animation”：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">加“<span class="comment">/*  */</span>”</span><br></pre></td></tr></table></figure><p><img src="/contentimg/9/35.png" alt="Result pic 1" title="屏蔽代码"></p><h3 id="浏览页面的时候显示当前浏览进度"><a href="#浏览页面的时候显示当前浏览进度" class="headerlink" title="浏览页面的时候显示当前浏览进度"></a>浏览页面的时候显示当前浏览进度</h3><p>　　到主题配置文件，搜scrollpercent，改为true。</p><p><img src="/contentimg/9/36.png" alt="Result pic 1" title="显示浏览进度"></p><p>　　还可以放到左边：修改scrollpercent上方的b2t为true。</p><p><img src="/contentimg/9/37.png" alt="Result pic 1" title="浏览进度显示在左边"></p><p><img src="/contentimg/9/38.png" alt="Result pic 1" title="两个修改项"></p><h3 id="fork-me-on-github"><a href="#fork-me-on-github" class="headerlink" title="fork me on github"></a>fork me on github</h3><h4 id="右上角"><a href="#右上角" class="headerlink" title="右上角"></a>右上角</h4><p>　　到<a href="http://tholman.com/github-corners/" rel="external nofollow noopener noreferrer" target="_blank">GitHub Corners</a>  选择喜欢的样式，复制代码。然后定位到next/layout/_layout.swig，搜索headband。将代码贴在下面：</p><p><img src="/contentimg/9/39.png" alt="Result pic 1" title="右边实例"></p><h3 id="左上角"><a href="#左上角" class="headerlink" title="左上角"></a>左上角</h3><p>　　到<a href="https://blog.github.com/2008-12-19-github-ribbons/" rel="external nofollow noopener noreferrer" target="_blank">Fork_me_on_GitHub</a>  选样式，像上面一样操作。当然也可以自己根据实际情况微调。</p><h3 id="将标签前缀“-”换为图标"><a href="#将标签前缀“-”换为图标" class="headerlink" title="将标签前缀“#”换为图标 "></a>将标签前缀“#”换为图标 <i class="fa fa-tag"></i></h3><p>　　到next/layout/_macro/post.swig，搜索 </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rel=<span class="string">"tag"</span></span><br></pre></td></tr></table></figure><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">将 #号 换成&lt;i class="fa fa-tag"&gt;&lt;/i&gt;</span><br></pre></td></tr></table></figure><p><img src="/contentimg/9/40.png" alt="Result pic 1" title="修改#为图标"></p><p><img src="/contentimg/9/41.png" alt="Result pic 1" title="效果"></p><h3 id="添加加载页面"><a href="#添加加载页面" class="headerlink" title="添加加载页面"></a>添加加载页面</h3><p><img src="/contentimg/9/42.png" alt="Result pic 1" title="加载进度条"></p><p>　　在next的配置文件搜“pace-theme”：这里我这个是pace-theme-center-atom，还有其他一堆可以选。</p><p><img src="/contentimg/9/43.png" alt="Result pic 1" title="加载进度条设置"></p><h3 id="添加站内搜索"><a href="#添加站内搜索" class="headerlink" title="添加站内搜索"></a>添加站内搜索</h3><blockquote><p> npm install hexo-generator-searchdb –save</p></blockquote><p>　　这里可能下载不下来，按照我前面说copy怎么下载那样，在npm失败后，会显示一个html，拿到百度云离线下载，下下来后，用记事本打开，搜version，找到最新版本，然后看barl的下载链接，再复制到百度云离线下载，然后当做本地文件来安装，就能安装了。</p><p>　　到主配置文件最后添加：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#表示站内搜索</span></span><br><span class="line">search:  </span><br><span class="line">    path: search.xml</span><br><span class="line">    field: post</span><br><span class="line">    format: html</span><br><span class="line">    <span class="built_in">limit</span>: 10000</span><br></pre></td></tr></table></figure><p>　　然后到NexT配置文件搜索“local_search”，启动enable：</p><p><img src="/contentimg/9/44.png" alt="Result pic 1" title="启动站内搜索"></p><h3 id="修改访问URL路径"><a href="#修改访问URL路径" class="headerlink" title="修改访问URL路径"></a>修改访问URL路径</h3><p>　　默认情况下是年月日一串很长的url路径。是在主配置文件进行的修改：搜索“permalink”</p><blockquote><p> permalink: :category/:title/   #分类/标题</p></blockquote><p><img src="/contentimg/9/45.png" alt="Result pic 1" title="修改访问url路径"></p><h3 id="添加文章置顶功能"><a href="#添加文章置顶功能" class="headerlink" title="添加文章置顶功能"></a><a href="https://blog.csdn.net/qwerty200696/article/details/79010629" rel="external nofollow noopener noreferrer" target="_blank">添加文章置顶功能</a></h3><p>　　现在应该都是新版本了，所以直接介绍新版本的方式：</p><p>先卸载老插件，然后装新插件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save -dev</span><br></pre></td></tr></table></figure><p>　　然后在文章开头加 “top: 数字”</p><p><img src="/contentimg/9/47.png" alt="Result pic 1" title="置顶设置"></p><p>　　这样就能看的效果了。不过推荐加一下置顶图标在前面：</p><p>　　打开next/layout/_macro/post.swig，搜索<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"post-meta"</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p>　　然后加入如下代码：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% <span class="keyword">if</span> post.top %&#125;</span><br><span class="line">    &lt;i class="fa fa-thumb-tack"&gt;&lt;/i&gt;</span><br><span class="line">    &lt;font <span class="built_in">color</span>=#<span class="number">222</span>&gt;置顶&lt;/font&gt;</span><br><span class="line">    &lt;span class="post-meta-divider"&gt;|&lt;/span&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><p><img src="/contentimg/9/48.png" alt="Result pic 1" title="添加置顶图标"></p><p><img src="/contentimg/9/49.png" alt="Result pic 1" title="置顶效果">　　</p><h3 id="添加coding部分的一键复制功能"><a href="#添加coding部分的一键复制功能" class="headerlink" title="添加coding部分的一键复制功能"></a><a href="https://yfzhou.coding.me/2018/08/27/Hexo-Next%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD%EF%BC%89/" rel="external nofollow noopener noreferrer" target="_blank">添加coding部分的一键复制功能</a></h3><p>　　本博客没启用该功能，具体请访问该链接：<a href="https://yfzhou.coding.me/2018/08/27/Hexo-Next%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BB%A3%E7%A0%81%E5%9D%97%E5%A4%8D%E5%88%B6%E5%8A%9F%E8%83%BD%EF%BC%89/" rel="external nofollow noopener noreferrer" target="_blank">添加coding部分的一键复制功能</a>  </p><p>　　由于有中文，该链接通过中文转码处理，如果失效，请通过域名查找。</p><h3 id="添加Robot和nofollow"><a href="#添加Robot和nofollow" class="headerlink" title="添加Robot和nofollow"></a>添加Robot和nofollow</h3><p>　　新建robots.txt文件在source根目录下：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">#hexo robots.txt</span><br><span class="line">User-agent: *</span><br><span class="line"></span><br><span class="line"><span class="function">Allow: /</span></span><br><span class="line"><span class="function"><span class="title">Allow</span>: /<span class="title">archives</span>/</span></span><br><span class="line"><span class="function"><span class="title">Allow</span>: /<span class="title">categories</span>/</span></span><br><span class="line"><span class="function"><span class="title">Allow</span>: /<span class="title">tags</span>/</span></span><br><span class="line"><span class="function"><span class="title">Allow</span>: /<span class="title">about</span>/</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Disallow</span>: /404/</span></span><br><span class="line"><span class="function"><span class="title">Disallow</span>: /<span class="title">contentimg</span>/</span></span><br><span class="line"><span class="function"><span class="title">Disallow</span>: /<span class="title">css</span>/</span></span><br><span class="line"><span class="function"><span class="title">Disallow</span>: /<span class="title">images</span>/</span></span><br><span class="line"><span class="function"><span class="title">Disallow</span>: /<span class="title">js</span>/</span></span><br><span class="line"><span class="function"><span class="title">Disallow</span>: /<span class="title">lib</span>/</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="title">Sitemap</span>: <span class="title">http</span>://<span class="title">yaojx.net</span>/<span class="title">search.xml</span></span></span><br><span class="line"><span class="function"><span class="title">Sitemap</span>: <span class="title">http</span>://<span class="title">yaojx.net</span>/<span class="title">sitemap.xml</span></span></span><br><span class="line"><span class="function"><span class="title">Sitemap</span>: <span class="title">http</span>://<span class="title">yaojx.net</span>/<span class="title">baidusitemap.xml</span></span></span><br></pre></td></tr></table></figure><p>　　当没这个文件时，默认全部内容可以爬，这个文件就是告诉那些可以爬，那些不行。</p><blockquote><p> npm install hexo-autonofollow –save</p></blockquote><p>　　当文章中有链接时，爬虫会顺着链接爬出去。所以得加这个nofollow。</p><p>　　安装完后，到主配置文件最底下添加：</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">nofollow:</span></span><br><span class="line"><span class="function">    <span class="title">enable</span>: <span class="title">true</span></span></span><br><span class="line"><span class="function">    <span class="title">exclude</span>:</span></span><br><span class="line"><span class="function">        - <span class="title">yaojx.net</span></span></span><br></pre></td></tr></table></figure><p>　　然后就是去百度站长提交robot文件了。</p><h3 id="qq点击后直接开打联系我的窗口"><a href="#qq点击后直接开打联系我的窗口" class="headerlink" title="qq点击后直接开打联系我的窗口"></a>qq点击后直接开打联系我的窗口</h3><p>　　该功能使用的是腾讯的开放接口：</p><p><img src="/contentimg/9/51.png" alt="Result pic 1" title="next配置文件设置">　　</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://wpa.qq.com/msgrd?v=3&amp;uin=659771655&amp;site=qq&amp;menu=yes</span><br></pre></td></tr></table></figure><p>　　uin改成自己的qq就行了。</p><p>这里有几篇文章是讲怎么修改整个主题的，重点推荐：<br><a href="http://yangbingdong.com/2017/build-blog-hexo-advanced/" rel="external nofollow noopener noreferrer" target="_blank">基于Hexo搭建个人博客——进阶篇(从入门到入土)</a><br><a href="https://segmentfault.com/a/1190000016527304" rel="external nofollow noopener noreferrer" target="_blank">Hexo搭建GitHub博客—打造炫酷的NexT主题–高级(四)</a><br><a href="https://www.colabug.com/1840493.html" rel="external nofollow noopener noreferrer" target="_blank">Hexo+Next个人博客主题优化</a> </p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文是记录如何修改配置Next，增加百度统计功能、评论区、RSS、爬虫等模块。是在前面几篇文章的扩展记录。&lt;/p&gt;
&lt;p&gt;　　注意这些第三方插件，当我们的博客布在github和coding两边时，数据是可以共用的！只要id和key是同样，在服务供应商那边记录域名和网站后，就可以顺利共用数据。&lt;/p&gt;
    
    </summary>
    
      <category term="编程人生" scheme="https://YaojiaxinPC.github.io/categories/%E7%BC%96%E7%A8%8B%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="js" scheme="https://YaojiaxinPC.github.io/tags/js/"/>
    
      <category term="个人博客" scheme="https://YaojiaxinPC.github.io/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    
      <category term="前端技术" scheme="https://YaojiaxinPC.github.io/tags/%E5%89%8D%E7%AB%AF%E6%8A%80%E6%9C%AF/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客心得---个人站点yaojx.net的优化之路</title>
    <link href="https://YaojiaxinPC.github.io/8SupGitPage/"/>
    <id>https://YaojiaxinPC.github.io/8SupGitPage/</id>
    <published>2018-10-18T14:55:58.000Z</published>
    <updated>2018-10-19T13:53:38.492Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文是记录配置域名转址，以及如何优化gitpage访问等等高级功能的文章。该系列有3篇：1.付费虚拟云主机+WordPress；2.免费github+Hexo；3.个人站点yaojx.net的优化之路。</p><a id="more"></a><p>　　整个优化非常坎坷，最后总结，才发现部署到coding就已经达到了优化中的99%。剩下这个1%，花了我99%的时间和精力。</p><p>　　本文不废话怎么排查，从什么地方入手。直接根据我优化中的体会来讲。</p><h2 id="一-转址"><a href="#一-转址" class="headerlink" title="一.转址"></a>一.转址</h2><h3 id="1-1-理解转址"><a href="#1-1-理解转址" class="headerlink" title="1.1 理解转址"></a>1.1 理解转址</h3><p><a href="https://www.2cto.com/net/201306/221200.html" rel="external nofollow noopener noreferrer" target="_blank">域名解析中A记录、CNAME、MX记录、NS记录的区别和联系</a></p><p><a href="http://winterttr.me/2015/10/23/from-dns-to-github-custom-domain/" rel="external nofollow noopener noreferrer" target="_blank">从DNS到github pages自定义域名 – 漫谈域名那些事</a></p><p>　　上面这两篇文章讲得很详细，介绍了DNS配置中几个选项间的关系。</p><p>　　转址的作用，就是当我在浏览器输入A的时候，浏览器自动帮我跳转到B网站（A方式），这里CNAME还添加了将B网站的前缀域名修改为A网站的效果（可配置，当没设置该项时就不会修改域名）。</p><p>　　一般情况下，我们只需要设置两个A方式（带www的，和不带www的），然后在page那边设置CNAME。</p><h3 id="1-2-GoDaddy转址"><a href="#1-2-GoDaddy转址" class="headerlink" title="1.2 GoDaddy转址"></a>1.2 GoDaddy转址</h3><p><img src="/contentimg/8/1.png" alt="Result pic 1" title="GoDaddy设置转址"></p><p>　　这里GoDaddy给我们设置了一个基础的转址，但是不是很好用(起作用慢)。推荐是去修改上面DNS管理。</p><p>　　这里我就不截图了，默认项可以保留，默认有几个A和几个CNAME。直接添加新选项，然后TTL设置为自定义“600”。其他默认项暂时没必要删除。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A       @     目标ip地址  //@ 相当于 yaojx.net</span><br><span class="line">A       www   目标ip地址  // 如果没这一项，网站就是www.yaojx.net了</span><br></pre></td></tr></table></figure><p>　　注意TTL设置600最小见效才快。不然得等好几个小时。</p><h3 id="1-3-dnspod转址（即现在的腾讯云服务）"><a href="#1-3-dnspod转址（即现在的腾讯云服务）" class="headerlink" title="1.3 dnspod转址（即现在的腾讯云服务）"></a>1.3 dnspod转址（即现在的腾讯云服务）</h3><p>　　这个不用记录了，直接有“一键”的。就是输入两个ip就行，默认“一键”后，给我们创造了两个A类型的，一个是“www”，另一个是“@”。</p><p>　　这里提一下怎么找gitpage和codingpage的ip：</p><p><img src="/contentimg/8/2.png" alt="Result pic 2" title="找page的ip"></p><p>　　直接ping网站，注意这里github的IP会左右变动。但是不影响我们使用A方式转址。图中ip没一致，但是仍然可以转址成功。</p><h3 id="1-4-GitHub相关配置"><a href="#1-4-GitHub相关配置" class="headerlink" title="1.4 GitHub相关配置"></a>1.4 GitHub相关配置</h3><p><a href="https://help.github.com/articles/troubleshooting-custom-domains/" rel="external nofollow noopener noreferrer" target="_blank">GitHub自定义域疑难解答</a></p><p>　　coding那个就不用说明了，和腾讯一样都是一键的。</p><p>　　GitHub这边要弄的东西不复杂，就添加一个文件<a href="https://github.com/YaojiaxinPC/YaojiaxinPC.github.io/blob/master/CNAME" rel="external nofollow noopener noreferrer" target="_blank">CNAME</a> ，注意没有后缀，五个字母都大写。里面放的是你要跳转的域名。</p><p>　　该文件一创建马上生效，你访问YaojiaxinPC.github.io就会跳到CNAME里面的域名yaojx.net然后又回来YaojiaxinPC.github.io，当然这时候前缀已经改为yaojx.net了。（这个过程可以在chrome中捕捉到，所以修改转址后，直接访问YaojiaxinPC.github.io反而耗时。）</p><p>　　这里遇到的坑是，刚开始使用GoDaddy，后面改cloudflare，因为都在国外，转址更新见效慢，域名那边没转址对YaojiaxinPC.github.io，导致跳过来gitpage后，是个404，访问YaojiaxinPC.github.io这边，又已经转址到yao.net–&gt;404，构不成一个环。卡了好久，等几个小时后，DNS同步到了后才见效。</p><p>　　coding那边就不用，一设置就见效。所以后面我域名都放到DNSPOD上了。</p><h2 id="二-优化工具"><a href="#二-优化工具" class="headerlink" title="二.优化工具"></a>二.优化工具</h2><h3 id="2-1-百度统计-分析优化内容"><a href="#2-1-百度统计-分析优化内容" class="headerlink" title="2.1 百度统计 分析优化内容"></a>2.1 <a href="https://tongji.baidu.com/web/welcome" rel="external nofollow noopener noreferrer" target="_blank">百度统计</a> 分析优化内容</h3><p><img src="/contentimg/8/3.png" alt="Result pic 3" title="百度统计情况-githubpage"></p><p><img src="/contentimg/8/4.png" alt="Result pic 4" title="百度统计情况-codingpage"></p><p>　　里面提到的合并js，以及Gzip压缩，都要改大量代码，所以这两项目前我还没去弄。只根据未优化前期提的建议，使用了后面提到的gulp压缩工具而已。同时前期还有提到头像文件太大等等其他建议（头像后面我改成170X170）。</p><h3 id="2-2-Chrome调试工具使用"><a href="#2-2-Chrome调试工具使用" class="headerlink" title="2.2 Chrome调试工具使用"></a>2.2 Chrome调试工具使用</h3><p><img src="/contentimg/8/5.png" alt="Result pic 5" title="Chrome调试工具"></p><p>　　未优化前期，用Chrome打开，一直提示加载过慢（5S以上），使用默认字体代替，同时提示是ttf文件下载太久。当时就把我引到优化字体的方向上，后面追查了好长时间，发现搞错了。重点在DNS解析和IP。当然，如果有用谷歌字体，这里会有问题的，谷歌被墙，所以在next主题中最好使用本地字体，搜索有提到用360库的，还有github上的ed链接等等那些，效果都一般，还是不使用这些字体好。</p><p><img src="/contentimg/8/6.png" alt="Result pic 6" title="取消使用谷歌字体"></p><p>还有其他一些统计工具，不过实际Chrome的调试工具就已经能完成那些统计了，就不推荐那些工具了。</p><h3 id="2-3-站长工具"><a href="#2-3-站长工具" class="headerlink" title="2.3 站长工具"></a>2.3 <a href="http://tool.chinaz.com/gzips/" rel="external nofollow noopener noreferrer" target="_blank">站长工具</a></h3><p><img src="/contentimg/8/7.png" alt="Result pic 7" title="codingpage自带优化"></p><p><img src="/contentimg/8/8.png" alt="Result pic 8" title="手动优化后的githubpage"></p><p>　　第二个图是更新了文章后截的图，大小上是大了一点点（其他东西都是和coding那边一样的），都是使用手动gulp优化后的Gzip压缩（文件只是体积变小，百度统计认的gzip是后缀为gz的压缩文件，意思不同）。但是在上面图中识别出来是不同：codingpage的直接压缩率99.96%？？？同时识别不出来gzip压缩。这样就能解释怎么放那边打开是秒开了。</p><h2 id="三-Gulp压缩"><a href="#三-Gulp压缩" class="headerlink" title="三.Gulp压缩"></a>三.Gulp压缩</h2><p>　　这个是重点，让整个包从15.7m压缩到11.7m。而且整个操作除了安装工具，写一个<a href="https://github.com/YaojiaxinPC/blogcode/blob/master/gulpfile.js" rel="external nofollow noopener noreferrer" target="_blank">js脚本</a> 外，不用修改工程中的任何东西和代码。不会对原工程造成影响！</p><p>　　<a href="https://www.npmjs.com/" rel="external nofollow noopener noreferrer" target="_blank">npm主页</a> </p><h3 id="3-1-安装gulp"><a href="#3-1-安装gulp" class="headerlink" title="3.1 安装gulp"></a>3.1 安装gulp</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install &lt;name&gt; [-g] [--save-dev]</span><br></pre></td></tr></table></figure><ol><li>name：node插件名称。例：</li></ol><blockquote><p> npm install gulp –save-dev</p></blockquote><ol><li><p>-g：全局安装。将会安装在%homepath%\AppData\Roaming\npm，并且写入系统环境变量；</p><ul><li><p>非全局安装：将会安装在当前目录的node_modules文件夹下，只能在当前目录通过require()调用使用。</p></li><li><p>全局安装：可以通过命令行在任何地方调用它。</p></li></ul></li></ol><ol><li><p>–save：将保存配置信息至package.json（package.json是nodejs项目配置文件）。</p></li><li><p>-dev：保存至package.json的devDependencies节点，不指定-dev将保存至dependencies节点。</p></li></ol><p>　　配置文件package.json记录了当前工程使用的相关包，只需要在有这个文件的文件夹下面执行“npm install”，就会根据package.json下载所有需要的包。</p><p><img src="/contentimg/8/9.png" alt="Result pic 9" title="package.json"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">npm install gulp --save-dev</span><br><span class="line">npm install gulp-htmlclean --save-dev</span><br><span class="line">npm install gulp-htmlmin --save-dev</span><br><span class="line">npm install gulp-imagemin --save-dev</span><br><span class="line">npm install gulp-minify-css --save-dev</span><br><span class="line">npm install gulp-uglify --save-dev</span><br><span class="line">//文件处理</span><br><span class="line">npm install del --save</span><br><span class="line">npm install mv --save</span><br><span class="line">//这个网络情况不是很好，所以最好通过设置配置文件的skip_render来避免处理README.md</span><br><span class="line">npm install copy --save</span><br></pre></td></tr></table></figure><h3 id="3-2-编写gulp脚本"><a href="#3-2-编写gulp脚本" class="headerlink" title="3.2 编写gulp脚本"></a>3.2 编写gulp脚本</h3><p>　　<a href="https://github.com/YaojiaxinPC/blogcode/blob/master/gulpfile.js" rel="external nofollow noopener noreferrer" target="_blank">gulp脚本</a> </p><p>　　可以使用我github上的这个脚本。里面做的事情就是压缩html、css、js、图片等，在我电脑上，无法进行覆盖操作，所以我就把生成的压缩文件保存到缓存文件夹，然后用del/copy/mv等操作来处理。</p><p>　　注意hexo编译的时候，会把后缀为“md”的文件都转成html，所以README.md也会变成README.html。这样，就不能把它放在source里面，只能放外面，在gulp后再复制进去public中。(其实这里可以通过设置主配置文件的skip_render来避免编译)</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> gulp = <span class="built_in">require</span>(<span class="string">'gulp'</span>);</span><br><span class="line"><span class="keyword">var</span> del = <span class="built_in">require</span>(<span class="string">'del'</span>);</span><br><span class="line"><span class="keyword">var</span> mv = <span class="built_in">require</span>(<span class="string">'mv'</span>);</span><br><span class="line"><span class="keyword">var</span> copy = <span class="built_in">require</span>(<span class="string">'copy'</span>);</span><br><span class="line"><span class="keyword">var</span> minifycss = <span class="built_in">require</span>(<span class="string">'gulp-minify-css'</span>);</span><br><span class="line"><span class="keyword">var</span> uglify = <span class="built_in">require</span>(<span class="string">'gulp-uglify'</span>);</span><br><span class="line"><span class="keyword">var</span> htmlmin = <span class="built_in">require</span>(<span class="string">'gulp-htmlmin'</span>);</span><br><span class="line"><span class="keyword">var</span> htmlclean = <span class="built_in">require</span>(<span class="string">'gulp-htmlclean'</span>);</span><br><span class="line"><span class="keyword">var</span> imagemin = <span class="built_in">require</span>(<span class="string">'gulp-imagemin'</span>);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment">// Clean  任务执行前，先清除之前生成的缓存文件</span></span><br><span class="line">gulp.task(<span class="string">'clean'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> del([<span class="string">'./public1/**'</span>], cb)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// move  任务执行完成后，从主目录复制文件过来缓存目录</span></span><br><span class="line"><span class="comment">//(此时会自动删除主目录),然后再复制回去（因为不能覆盖，所以不能从缓存目录直接过去主目录进行覆盖）</span></span><br><span class="line">gulp.task(<span class="string">'filedone'</span>,[<span class="string">'copy-all'</span>],()=&gt;&#123;gulp.start(<span class="string">'filedone-dealREADME'</span>);&#125;);</span><br><span class="line"><span class="comment">//将public下的文件复制到缓存文件夹下</span></span><br><span class="line">gulp.task(<span class="string">'copy-all'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> mv(<span class="string">'./public'</span>, <span class="string">'./public1'</span>,&#123;<span class="attr">clobber</span>: <span class="literal">false</span>&#125;, cb)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//复制README.md。处理完成后才进行重命名</span></span><br><span class="line">gulp.task(<span class="string">'filedone-dealREADME'</span>,[<span class="string">'copy-readme'</span>],()=&gt;&#123;gulp.start(<span class="string">'backcopy'</span>);&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//复制README.md</span></span><br><span class="line">gulp.task(<span class="string">'copy-readme'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> copy(<span class="string">'README.md'</span>, <span class="string">'./public1'</span>, cb);</span><br><span class="line">&#125;);</span><br><span class="line">gulp.task(<span class="string">'backcopy'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">cb</span>) </span>&#123;</span><br><span class="line">   <span class="keyword">return</span> mv(<span class="string">'./public1'</span>, <span class="string">'./public'</span>,&#123;<span class="attr">clobber</span>: <span class="literal">false</span>&#125;, cb)</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 压缩html</span></span><br><span class="line">gulp.task(<span class="string">'minify-html'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.html'</span>)</span><br><span class="line">        .pipe(htmlclean())</span><br><span class="line">        .pipe(htmlmin(&#123;</span><br><span class="line">            removeComments: <span class="literal">true</span>,</span><br><span class="line">            minifyJS: <span class="literal">true</span>,</span><br><span class="line">            minifyCSS: <span class="literal">true</span>,</span><br><span class="line">            minifyURLs: <span class="literal">true</span>,</span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public1'</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩css</span></span><br><span class="line">gulp.task(<span class="string">'minify-css'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.css'</span>)</span><br><span class="line">        .pipe(minifycss(&#123;</span><br><span class="line">            compatibility: <span class="string">'ie8'</span></span><br><span class="line">        &#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public1'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩js</span></span><br><span class="line">gulp.task(<span class="string">'minify-js'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./public/**/*.js'</span>)</span><br><span class="line">        .pipe(uglify())</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public1'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩主题图片</span></span><br><span class="line">gulp.task(<span class="string">'minify-images'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./public/images/**/*.*'</span>)</span><br><span class="line">        .pipe(imagemin(</span><br><span class="line">        [imagemin.gifsicle(&#123;<span class="string">'optimizationLevel'</span>: <span class="number">3</span>&#125;), </span><br><span class="line">        imagemin.jpegtran(&#123;<span class="string">'progressive'</span>: <span class="literal">true</span>&#125;), </span><br><span class="line">        imagemin.optipng(&#123;<span class="string">'optimizationLevel'</span>: <span class="number">7</span>&#125;), </span><br><span class="line">        imagemin.svgo()],</span><br><span class="line">        &#123;<span class="string">'verbose'</span>: <span class="literal">true</span>&#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public1/images'</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 压缩文章图片</span></span><br><span class="line">gulp.task(<span class="string">'minify-contentimg'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> gulp.src(<span class="string">'./public/contentimg/**/*.*'</span>)</span><br><span class="line">        .pipe(imagemin(</span><br><span class="line">        [imagemin.gifsicle(&#123;<span class="string">'optimizationLevel'</span>: <span class="number">3</span>&#125;), </span><br><span class="line">        imagemin.jpegtran(&#123;<span class="string">'progressive'</span>: <span class="literal">true</span>&#125;), </span><br><span class="line">        imagemin.optipng(&#123;<span class="string">'optimizationLevel'</span>: <span class="number">7</span>&#125;), </span><br><span class="line">        imagemin.svgo()],</span><br><span class="line">        &#123;<span class="string">'verbose'</span>: <span class="literal">true</span>&#125;))</span><br><span class="line">        .pipe(gulp.dest(<span class="string">'./public1/contentimg'</span>))</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//压缩字体文件（实际没看出效果）</span></span><br><span class="line">gulp.task(<span class="string">'fontttf'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    gulp.src(<span class="string">'./public/lib/font-awesome/fonts/*.*'</span>)</span><br><span class="line">    .pipe(gulp.dest(<span class="string">'./public1/lib/font-awesome/fonts'</span>));</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//build完后复制文件回去</span></span><br><span class="line">gulp.task(<span class="string">'build'</span>, [<span class="string">'minify-html'</span>,<span class="string">'minify-css'</span>,<span class="string">'minify-js'</span>,<span class="string">'minify-images'</span>,<span class="string">'minify-contentimg'</span>,<span class="string">'fontttf'</span>],()=&gt;&#123;gulp.start(<span class="string">'filedone'</span>);&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 执行清理任务后才build</span></span><br><span class="line">gulp.task(<span class="string">'default'</span>, [<span class="string">'clean'</span>],()=&gt;&#123;gulp.start(<span class="string">'build'</span>);&#125;);</span><br></pre></td></tr></table></figure><h3 id="3-3-当下载不了工具怎么办"><a href="#3-3-当下载不了工具怎么办" class="headerlink" title="3.3 当下载不了工具怎么办"></a>3.3 当下载不了工具怎么办</h3><p>　　npm是一个前端自动化工具。有中文官网，但是网络很不好，同时我们在gitbash里面操作下载，也经常因为网络问题下载不了。</p><p>　　后面排查分析，了解到gitbash里面的install操作，实际上是去github上找最新版本down下来。所以如果遇到安装的时候报联网失败，是可以分析找到github上对应的包，直接下载来安装的（npm的服务器ping经常断流，不是墙的问题）。</p><p>　　在install失败的时候，会提示“XXX网站”连接失败，这时候把这个网站复制到百度云离线下载，是能下载下来的：</p><p><img src="/contentimg/8/10.png" alt="Result pic 10" title="下载copy失败时扒的html"></p><p>　　打开后找version，拉到最下面，找到最新的一个版本后，找下载链接tarball。然后用百度云离线再下载下来。放到D盘根目录：</p><blockquote><p>  npm install d:/XXX.tgz</p></blockquote><p><img src="/contentimg/8/11.png" alt="Result pic 11" title="下载copy失败时扒的tarball"></p><p>　　如果还不行，就直接手动解压，放到node_modules目录吧。</p><p>　　这里贴几个npm的介绍博客链接吧：</p><p><a href="https://www.cnblogs.com/QRL909109/p/5620824.html" rel="external nofollow noopener noreferrer" target="_blank">前端自动化gulp遇上es6从 无知到深爱</a> </p><p><a href="https://www.cnblogs.com/strick/p/5151714.html" rel="external nofollow noopener noreferrer" target="_blank">前端自动化构建工具gulp记录</a> </p><p><a href="http://www.ruanyifeng.com/blog/2016/01/npm-install.html" rel="external nofollow noopener noreferrer" target="_blank">npm 模块安装机制简介</a> </p><p>　　另外，在github下载别人的博客代码后，可以通过cmd cd到目录下，直接npm install就行，会默认自己找package.json来安装。注意看一下里面的结构，联网下载的是有前缀^，本地文件的是相对路径。</p><p>　　package-lock.json影响不大，可以删除。当安装package.json时，会重新生成。</p><p><img src="/contentimg/8/12.png" alt="Result pic 12" title="package.json"></p><h2 id="四-总结"><a href="#四-总结" class="headerlink" title="四.总结"></a>四.总结</h2><p>　　划重点，其实如果你部署在codingpage上，本篇文章就不用看了。因为都是秒开的。</p><p>　　部署在github上，逼格虽然高了些，但由于服务器在国外，而且没自带加速，优化之路很麻烦：压缩+CDN加速。</p><p>　　而压缩，其实就是牺牲cpu解压换来的。目前使用gulp进行初步压缩。复杂的可以直接压缩成gz文件来处理。</p><p>　　在我认为，js文件压缩就没必要了，合并js文件还可以，压缩就没必要。图片方面是主要优化对象，而这里，其实还有个<a href="https://www.qiniu.com/" rel="external nofollow noopener noreferrer" target="_blank">七牛云</a> 七牛在国内，访问比github快。而且每月有10g的免费额度。</p><p>　　注意，这里page的优化，DNS解析权重最大，所以上面提到的合并js，其实就是避免来回的dns解析请求。而IP，github服务器在国外，访问相对国内的coding会慢好多。</p><p>　　由于整个page是静态文件，所以好多技术性上的优化（缓存），权重是很小的。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文是记录配置域名转址，以及如何优化gitpage访问等等高级功能的文章。该系列有3篇：1.付费虚拟云主机+WordPress；2.免费github+Hexo；3.个人站点yaojx.net的优化之路。&lt;/p&gt;
    
    </summary>
    
      <category term="编程人生" scheme="https://YaojiaxinPC.github.io/categories/%E7%BC%96%E7%A8%8B%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="域名" scheme="https://YaojiaxinPC.github.io/tags/%E5%9F%9F%E5%90%8D/"/>
    
      <category term="个人博客" scheme="https://YaojiaxinPC.github.io/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
  <entry>
    <title>搭建个人博客心得---github+Hexo</title>
    <link href="https://YaojiaxinPC.github.io/7CreatGitPage/"/>
    <id>https://YaojiaxinPC.github.io/7CreatGitPage/</id>
    <published>2018-10-16T15:55:58.000Z</published>
    <updated>2018-10-20T07:16:12.511Z</updated>
    
    <content type="html"><![CDATA[<p>　　本文是记录如何安装环境，发布初版个人GitPage网页。该系列有3篇：1.付费虚拟云主机+WordPress；2.免费github+Hexo；3.个人站点yaojx.net的优化之路。</p><a id="more"></a><p>　　这个比较好玩，逼格高好多，网速也快了好多。是利用GitHub的<a href="https://pages.github.com/" rel="external nofollow noopener noreferrer" target="_blank">GitPage</a>  技术，把自己通过Hexo工具编译出来的静态html文件放在帐号共享项目中，就能让别人通过“用户名.github.io”固定连接来访问你的这些html网页。后面加上DNS转址功能把那串固定连接隐藏掉，基本别人就看不出来你这个网站是主机承载还是gitpage了。</p><h2 id="一-环境准备"><a href="#一-环境准备" class="headerlink" title="一.环境准备"></a>一.环境准备</h2><p>　　首先当然是：注册<a href="https://github.com/" rel="external nofollow noopener noreferrer" target="_blank">GitHub</a>  帐号，当然，国内的<a href="https://coding.net/" rel="external nofollow noopener noreferrer" target="_blank">Coding</a> 也行，就是<a href="https://coding.net/help/doc/coding-service/coding-pages-introduction.html" rel="external nofollow noopener noreferrer" target="_blank">Coding Pages</a> 。最终我采用的方案是布到GitHub，同时备份一份到Coding，国内访问就用Coding，ping只有50，秒开。GitHub优化到最后，DNS解析始终突破不了，因为它的服务器是在国外。 </p><h3 id="1-1-安装Node-js"><a href="#1-1-安装Node-js" class="headerlink" title="1.1 安装Node.js"></a>1.1 安装Node.js</h3><p>　　<a href="https://nodejs.org/en/" rel="external nofollow noopener noreferrer" target="_blank">Nodejs官网</a></p><p>　　<a href="http://nodejs.cn/download/" rel="external nofollow noopener noreferrer" target="_blank">Nodejs下载</a></p><p>　　<a href="https://segmentfault.com/a/1190000004947261" rel="external nofollow noopener noreferrer" target="_blank">Nodejs安装教程</a></p><p><img src="/contentimg/7/1.png" alt="Result pic 1" title="Node安装检验"></p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><h3 id="1-2-安装Git"><a href="#1-2-安装Git" class="headerlink" title="1.2 安装Git"></a>1.2 安装Git</h3><p>　　<a href="https://git-scm.com/download/" rel="external nofollow noopener noreferrer" target="_blank">Git下载</a></p><p>　　安装完成git后，在桌面创建一个快捷方式，这时候点击启动后，里面的路径会是C盘下的。为了使用方便，我们是希望它直接cd到博客所在的目录，可以按照下面这样改：删除“–cd-to-home”、“%HOMEDRIVE%%HOMEPATH%”；添加博客目录到“起始位置”。</p><p><img src="/contentimg/7/2.png" alt="Result pic 2" title="Git小窍门"></p><p>　　检验安装情况：</p><p><img src="/contentimg/7/3.png" alt="Result pic 3" title="npm版本检查"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>　　我当时遇到“bash: npm: command not found”。后面搜索到是没安装好，只能在cmd下使用，需要在gitbash里面再装。</p><p>　　需要输入命令“ git clone –recursive git://github.com/isaacs/npm.git”，然后再输入“cd npm”，“node cli.js install npm -gf”</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive git://github.com/isaacs/npm.git</span><br><span class="line"><span class="built_in">cd</span> npm</span><br><span class="line">node cli.js install npm -gf</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/daocaoren92wq/article/details/64444532" rel="external nofollow noopener noreferrer" target="_blank">windows git bash npm: command not found</a></p><h3 id="1-3-安装Hexo"><a href="#1-3-安装Hexo" class="headerlink" title="1.3 安装Hexo"></a>1.3 安装Hexo</h3><p>　　先选个文件夹作为博客文件存储。这里我选“D:\source\yaojiaxinpc”。</p><p>　　打开gitbash，cd到这个目录。安装hexo：输入指令“npm install hexo-cli -g ”。</p><p>　　等它下载安装好后，输入指令“hexo init”。当然后面可以加文件夹的名字。不加就默认装在当前目录。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//安装hexo</span><br><span class="line">npm install hexo-cli -g</span><br><span class="line"></span><br><span class="line">//查看hexo版本</span><br><span class="line">hexo -v</span><br><span class="line"></span><br><span class="line">//初始化hexo</span><br><span class="line">hexo init</span><br><span class="line">//会下载文件到当前目录，生成node_modules等文件夹</span><br></pre></td></tr></table></figure><p><img src="/contentimg/7/6.png" alt="Result pic 6" title="hexo安装"></p><p><img src="/contentimg/7/4.png" alt="Result pic 4" title="npm工具保存目录"></p><p>　　后期文件夹中的“node_modules”目录，都是从这里的cmd运行编译过去的。</p><h2 id="二-初次建站"><a href="#二-初次建站" class="headerlink" title="二.初次建站"></a>二.初次建站</h2><h3 id="2-1-Hexo建站"><a href="#2-1-Hexo建站" class="headerlink" title="2.1 Hexo建站"></a>2.1 Hexo建站</h3><p>　　这里贴一下<a href="https://www.npmjs.com/" rel="external nofollow noopener noreferrer" target="_blank">npm主页</a> 。上面好东西蛮多，工具类等等。</p><p>　　说明文档：<a href="https://docs.npmjs.com/getting-started/what-is-npm" rel="external nofollow noopener noreferrer" target="_blank">What is npm?</a></p><p><img src="/contentimg/7/7.png" alt="Result pic 7" title="初始化完成hexo"></p><p>　　站址文件生成指令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo g  //hexo generate</span><br></pre></td></tr></table></figure><p><img src="/contentimg/7/8.png" alt="Result pic 8" title="生成Public文件夹"></p><p>　　这时候目录下会多出来一个Public文件夹。里面的东西就是我们需要的网站文件，到时发布到网上的也是这里的东西（不是整个工程，就Public目录下的文件直接上传就行，不然会报错。）</p><p><img src="/contentimg/7/5.png" alt="Result pic 5" title="上传整个工程导致的错误"></p><p><img src="/contentimg/7/10.png" alt="Result pic 10" title="快捷方式出权限问题"></p><p>　　<strong><em>这里我也遇到“hexo Permission denied”的问题，是权限问题，但是由于是运行在windows系统，不是sudo，也不是unsafe和SSH密钥问题。最后解决的方法是：打开gitbash的源文件，cd到新目录重新上面部署的步骤，运行完，快捷方式那个就正常了</em></strong></p><h3 id="2-2-本地站址访问"><a href="#2-2-本地站址访问" class="headerlink" title="2.2 本地站址访问"></a>2.2 本地站址访问</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo s  //hexo server</span><br></pre></td></tr></table></figure><p><img src="/contentimg/7/9.png" alt="Result pic 9" title="本地启动html服务"></p><h3 id="2-3-目录结构说明"><a href="#2-3-目录结构说明" class="headerlink" title="2.3 目录结构说明"></a>2.3 目录结构说明</h3><p><img src="/contentimg/7/11.png" alt="Result pic 11" title="主目录下文件"></p><p>　　第一个“node_modules”，都是工具里面的东西，不用关注，当作编译工具看待吧，就是根据“package.json”里面记录的要安装的工具，安装到这个目录底下。</p><p>　　重点关注的是“_config.yml”文件，然后就是“themes”，主题目录，接着是“source”：放博文和图片等等其他东西的地方。</p><p>　　“public”是生成html等最终产物的地方，到时提交这个目录里面的东西上去就行，推荐用GitHub DeskTop，或者SVN提交。厉害的也可以用gitbash。</p><p>　　“scaffolds”目录，就一些模版而已。可以在gitbash里面打：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new pagename</span><br></pre></td></tr></table></figure><p><img src="/contentimg/7/12.png" alt="Result pic 12" title="指令生成页面md文件"></p><h2 id="三-发布Page"><a href="#三-发布Page" class="headerlink" title="三.发布Page"></a>三.发布Page</h2><h3 id="3-1-1-GitHub准备"><a href="#3-1-1-GitHub准备" class="headerlink" title="3.1.1 GitHub准备"></a>3.1.1 GitHub准备</h3><p>　　这里可以弄SSH密钥后，设置成gitbash来直接“hexo d”就上传public文件目录。也可以手动拖文件到GitHub DeskTop里上传。而拉到网页上的话，github是支持的，但是coding不支持多文件。</p><p>　　注意要先安装插件：</p><blockquote><p> npm install hexo-deployer-git –save</p></blockquote><p>　　下面记录SSH key方式，因为这种方式可以直接gitbash界面操作，可以在执行完“hexo g”后直接“hexo d -m ‘comment message’”就部署上去，很方便。</p><p>　　登陆github个人主页，个人头像下拉–&gt;Settings–&gt;SSH and GPG keys–&gt;New SSH key</p><p><img src="/contentimg/7/13.png" alt="Result pic 13" title="New SSH Key"></p><p>　　然后回到电脑上，生成key文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C <span class="string">"git邮箱"</span></span><br></pre></td></tr></table></figure><p>　　连续3次回车就行，就会生成key文件。在系统当前用户目录下(开启查看隐藏文件) %homepath%.ssh</p><p><img src="/contentimg/7/14.png" alt="Result pic 14" title="key文件"></p><p>　　将id_rsa.pub文件以文本方式打开。打开之后全部复制到key中。</p><p>　　然后就可以回gitbash测试情况：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com</span><br><span class="line"></span><br><span class="line">yes</span><br></pre></td></tr></table></figure><p><img src="/contentimg/7/15.png" alt="Result pic 15" title="检查连接"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name <span class="string">"git用户名"</span></span><br><span class="line">git config --global user.email <span class="string">"git邮箱"</span></span><br></pre></td></tr></table></figure><p>　　还没结束，还需要到“_config.yml”文件进行对应的配置：</p><p><img src="/contentimg/7/16.png" alt="Result pic 16" title="配置提交目录和分支"></p><p>　　记住，这里使用的是SSH，所以repository也应该用SSH目录下的。</p><p><img src="/contentimg/7/17.png" alt="Result pic 17" title="repository地址"></p><p>　　在github desktop中，这里才是用https下的地址。两个使用的是不同的协议的。</p><p>　　同时注意是主线master。</p><h3 id="3-1-2-GitPage访问"><a href="#3-1-2-GitPage访问" class="headerlink" title="3.1.2 GitPage访问"></a>3.1.2 GitPage访问</h3><p>　　到浏览器中输入YaojiaxinPC.github.io (用户名.github.io)。就可以看了。</p><p>这里也记录一下gitpage的一些细节吧。</p><p><img src="/contentimg/7/18.png" alt="Result pic 18" title="创建代码库"></p><p>　　刚注册好后，点击头像左边的“+”，新建目录“New repository”。根据gitpage推荐，是“用户名”+github.io，当然也可以起其他名字，只是起其他名字的话，就变成三级域名了，前缀会自动给你加“用户名.github.io”，后面的才是“/”+你这里起的名字。</p><p><img src="/contentimg/7/19.png" alt="Result pic 19" title="page设置选项"></p><p>　　在这个页面往下拉，到图中这里，就是设置你的page是关联哪个代码库的，所以是可以更改的。第一次弄的时候，可以到这里选Theme，然后根据步骤自动生成一个页面来试试看效果。</p><p>　　再往下的，就是删库功能项了。<br>　　<br>　　剩下的，就是一点点修改，本地看效果后，更新上来看外网效果了。</p><h3 id="3-2-1-Coding准备"><a href="#3-2-1-Coding准备" class="headerlink" title="3.2.1 Coding准备"></a>3.2.1 Coding准备</h3><p>　　这里也讲讲国内的coding吧。</p><p>　　和github差距还是蛮大的，不过好在国内访问快。现在和TX联手了，收费项目也变多了。商业用途用它还不错，但是个人非盈利的就不好说了。不过还是多多支持国产吧。这里还是得感谢coding的，gitpage那边，整优化搞了两三天，都不理想，访问最快2s起步（还是半夜3、4点的才能达到这个效果），后面还是挂到coding这边，就能秒开了。<br>　　<br><img src="/contentimg/7/20.png" alt="Result pic 20" title="coding开启page"></p><h3 id="3-2-2-Coding-Pages访问"><a href="#3-2-2-Coding-Pages访问" class="headerlink" title="3.2.2 Coding Pages访问"></a>3.2.2 Coding Pages访问</h3><p>　　coding做得比gitpage好的地方还是有的，在dns转址上，极其方便，还加了https访问。这点得给个赞。</p><p><img src="/contentimg/7/21.png" alt="Result pic 21" title="coding设置page"></p><p>　　这里的设置和gitpage的是一样的，不过更好操作一些。而且还没项目名字限制，想起什么名字都行。</p><h2 id="四-Hexo更换Themes"><a href="#四-Hexo更换Themes" class="headerlink" title="四.Hexo更换Themes"></a>四.Hexo更换Themes</h2><p>　　到这里，其实已经可以自己做博客放上去了。不过，作为一个非前端人员，而我又觉得初始版面不好看，怎么处理？幸好hexo早考虑到这个，给了好多皮肤让我们换。</p><p>　　<a href="https://github.com/hexojs/hexo/wiki/Themes" rel="external nofollow noopener noreferrer" target="_blank">Hexo主题官网</a></p><h3 id="更换Next主题"><a href="#更换Next主题" class="headerlink" title="更换Next主题"></a>更换Next主题</h3><p>　　我比较喜欢头像挂左边的，加上搜索教程的时候，都是推荐<a href="https://github.com/litten/hexo-theme-yilia" rel="external nofollow noopener noreferrer" target="_blank">yilia</a> 的。所以一开始是用的这个主题。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean //删除public目录（建议每次生成都要执行该删除指令，防止冲突）</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/litten/hexo-theme-yilia.git themes/yilia</span><br></pre></td></tr></table></figure><p>　　这里的操作，其实就是去github上拷贝一个皮肤下来，放到目录“themes/yilia”。所以其实你也可以手动去网页上下载zip，然后解压到themes目录下就行。</p><p>　　下载好themes后，修改主配置文件：</p><p><img src="/contentimg/7/22.png" alt="Result pic 22" title="修改主配置文件应用新皮肤"></p><p>　　该部分另外开一个文章详细说明。</p><p>　　结尾贴一下几篇Markdown的介绍网址吧。</p><p>　　当然还有个中文前面隔开两个空格的小窍门：英文输入法下，切全角，然后两下空格。</p><p><a href="https://www.zybuluo.com/mdeditor#fnref:code" rel="external nofollow noopener noreferrer" target="_blank">Cmd Markdown 编辑阅读器</a></p><p><a href="http://mahua.jser.me/" rel="external nofollow noopener noreferrer" target="_blank">MaHua 在线markdown编辑器</a></p><p><a href="https://wizardforcel.gitbooks.io/markdown-simple-world/2.html" rel="external nofollow noopener noreferrer" target="_blank">Markdown 基本语法</a></p><p><a href="https://segmentfault.com/a/1190000010223222" rel="external nofollow noopener noreferrer" target="_blank">Markdown 语法整理大集合2017</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;　　本文是记录如何安装环境，发布初版个人GitPage网页。该系列有3篇：1.付费虚拟云主机+WordPress；2.免费github+Hexo；3.个人站点yaojx.net的优化之路。&lt;/p&gt;
    
    </summary>
    
      <category term="编程人生" scheme="https://YaojiaxinPC.github.io/categories/%E7%BC%96%E7%A8%8B%E4%BA%BA%E7%94%9F/"/>
    
    
      <category term="个人博客" scheme="https://YaojiaxinPC.github.io/tags/%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
    
  </entry>
  
</feed>
